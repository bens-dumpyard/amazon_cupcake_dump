// Comments are accepted in JSON configuration files. Use cJSON_Minify to strip them prior to parsing.
{
    "Hardware Definition":
        {
            "Name"                  : "Cupcake",
            "Num Mics"              : 4,
            "Num Speakers"          : 2,
            "Num Max Speakers"      : 2,
            "Mics SamplingRate"     : 16000,
            "ASR Path SamplingRate" : 16000,
            "Speakers SamplingRate" : 48000
        },

    "Global Definition":
        {
            "Num Max Speakers"      : 2,
            "Num Internal Speakers" : 0,

            "Time to mute after unmute in ms - ASR"  : 200,
            "Time to mute after unmute in ms - VOIP" : 200,

            // "True" is the default mode
            // If there is a reference signal, we will use AEC, otherwise we will use ANC
            // FBF is always enabled
            "Enable AEC/ABF according to ref level" : true,

            // if above is true,  this forces enable flags
            // if above is false, this forces enable flags, but only when AEC/ABF is in used according to ref levels
            "Enable ABF" : true,
            "Enable AEC" : true
        },

    "Path Definition":
        {
            "ASR":
                {
                    // Note: Frames are processed roughly in this order within the AFE
                    "Algorithms":
                        {
                            "Downsampler"           : "Downsampler IIR",
                            "HPF"                   : "HPF 80Hz @ 16K", // both mic In + ref In
                            "FilterBank"            : "ASR FilterBank",
                            "AEC"                   : "ASR AcousticEchoCanceler",
                            "SerialARA"             : "ASR Serial ARA",
                            "SerialARA_EXT"         : "ASR Serial ARA BT",
                            "SerialARA_BeamMerger"  : "ASR SerialARA BeamMerger",
                            "MicDelay"              : "ASR Mic Delay Line",
                            "ABF"                   : "ASR AdaptiveBeamFormer",
                            "VAD"                   : "Voice Activity Detector",
                            "MicEnergy"             : "ASR Mic Energy Computation", //Computes mic energy to help decide resetting modules.
                            "SerialARA_BeamSelector": "ASR SNRBeamSelector",
                            "EarConDetector"        : "ASR EarConDetector",
                            "Earcon FilterBank"     : "ASR Earcon FilterBank",
                            "OutputGain"            : "ASR Output Gain",
                            "EspFeatureExtraction"  : "EspFeatureExtraction",
                            "MicsPostAECOutputGain" : "Mics Post AEC Output Gain"
                        }
                },

            "Voice":
                {
                    "Algorithms":
                        {
                            "Downsampler"               : "Downsampler IIR",
                            "HPF"                       : "HPF 80Hz @ 16K",   // both mic In + ref I
                            "GainRampUp"                : "GainRampUp",
                            "FilterBank"                : "VOIP FilterBank",
                            //"AEC"                       : "VOIP AcousticEchoCanceler",
                            "VAEC"                      : "VOIP VAEC",
                            //"ResidualEchoSuppressor"    : "Frequency Masking RES",
                            "ResidualEchoSuppressor"    : "Frequency Masking Lite RES",
                            "NoiseReductor"             : "Recursive Magnitude Estimation NR",
                            "ComfortNoiseGenerator"     : "Random Filler CNG",
                            // For AGC, select "FB Automatic Gain Control" or "Automatic Gain Control",
                            //"AGC"                       : "Automatic Gain Control",
                            "AGC"                       : "FB Automatic Gain Control",
                            "MultiMicBtHdmi"            : "VOIP Flex Beam Former",
                            "VOIPTxLimiter"             : "VOIP Tx Limiter"
                        }
                },

            "Mic":
                {
                    "Algorithms":
                        {

                        }
                },

            "Playback":
                {
                    "Algorithms":
                        {

                        }

                },

            "Playback VOIP":
                {
                    "Algorithms":
                        {

                        }
                }

        },

    "Algorithm Definition":
        {


            "ASR FilterBank":
                {
                    "FFT Len"               : 128,
                    "Decimation Rate"       : 64,
                    "FilterLen"             : 640,
                    "AnaSynFilterCoefs"     : "coefs_FilterBank_640.cfg"
                },

            "ASR AcousticEchoCanceler":
                {
                    // The number of inputs is set-up at run-time, it's the number of microphones in the system
                    // "Adapted Inputs Indexes": [ 0, 1, 2, 3, 4, 5, 6 ],

                    // Generic Canceler : AEC
                    "Num Refs Per Input"    : 2,

                    "TailLen"               : 2560,
                    "MaxStepSize"           : 0.2,

                    "adaptBandLoHz"         : 0,
                    "adaptBandHiHz"         : 8000,

                    "leakyFactor"           : 1.0,
                    "DivFactorThd"          : 1.0,
                    "RegFactorScale"        : 1E-5,

                    "bandBasedTailLen"      : true,
                    "bandBasedStepSize"     : true,

                    "stepSizeRednScale"     : 5.0,
                    "stepSizeErrorScale"    : 5.0,

                    // AEC specific parameters
                    "RefSigEnThresh"        : 0,    //3.1623E-6,  // corresponds to wideband level of -55 dB (ref signal) power:10^(-55/10) = 3.162 E-6
                    "Enable VSS"            : true,

                    // Round Robin Logic
                    "Ord2 to Ord1 ratio Percent"      : 50
                },


           "ARA BT RefTarBeamSelector":
               {
                    "Num Frames For Transition"    : 40,
                    "Power threshold for ref"      : 2.0,  // aprox 3dB
                    "Power threshold for tar"      : 0.5,  // aprox -3dB
                    "Smoothing factor alpha"       : 0.999
               },

          "ASR Mic Delay Line":
               {
                    "Mic Input delay"              : 64 //Samples to delay mic input provided to AEC
               },

           "ASR Mic Energy Computation":
                {
                    "Mic Energy Init Value"        : 9.4E-7,
                    "Mic Enegry Silence Threshold" : 9.4E-7,
                    "Mic Energy Smoothing factor"  : 0.998
                },

            "ASR SNRBeamSelector":
                {
                    "energyAdaptationFactorFast"      : 0.95,
                    "energyAdaptationFactorSlow"      : 0.987,
                    "energyRatio"                     : 1.2,
                    "noiseAdaptationFactor"           : 1.001,
                    "bufferSize"                      : 10,
                    "hangoverPeriod"                  : 15,
                    "SNRThreshold"                    : 6.5
                },

            "ASR Serial ARA":
                {
                     // The number of inputs is set-up at run-time, it's the number of microphones in the system
                     "Adapted Inputs Indexes": [ 0, 1, 2, 3, 4, 5, 6, 7 ],

                     "Num Refs Per Input"    : 2,
                     "Input-References Info" :
                        [
                            //2 references per target beam
                            [ 4,  6],
                            [ 5,  6],
                            [ 5,  6],
                            [ 6,  7],
                            [ 7,  1],
                            [ 0,  1],
                            [ 1,  3],
                            [ 2,  3]
                        ],

                     "TailLen"               : 2560,
                     "MaxStepSize"           : 0.2,

                     "adaptBandLoHz"         : 0,
                     "adaptBandHiHz"         : 8000,

                     "leakyFactor"           : 0.4,
                     "DivFactorThd"          : 1.0,
                     "RegFactorScale"        : 1E-5,

                     "bandBasedTailLen"      : true,
                     "bandBasedStepSize"     : true,

                     "stepSizeRednScale"     : 3.0,
                     "stepSizeErrorScale"    : 3.0,

                     "EnergyStartFreqHz"               : 500,
                     "EnergyEndFreqHz"                 : 3500,
                     "KNoiseAlpha"                     : 0.999,
                     "KEnergyAlpha"                    : 0.75,
                     "KVssScaleFactorNr"               : 0.15,
                     "KVssScaleFactorDr"               : 0.5,
                     "VSS freeze threshold"            : 0.75,
                     "InitialFastConvergenceTimeSec"   : 15,
                     "Reset time in sec on silence"    : 900,  //15 minutes
                     "Use XCorr for VSS"               : true,

                     // AEC specific parameters
                     "RefSigEnThresh"        : 3.1623E-6,  // corresponds to wideband level of -55 dB (ref signal) power:10^(-55/10) = 3.162 E-6
                     "Enable VSS"            : true,

                     //Output gain params
                     "Gain step"                  : 0.2,
                     "Max gain ARA With Playback" : 2.0,
                     "Max gain ARA No Playback"   : 4.0,

                     // Round Robin Logic
                     "Ord2 to Ord1 ratio Percent"      : 50
                },

             "ASR Serial ARA BT":
                {
                      // The number of inputs is set-up at run-time, it's the number of microphones in the system
                      "Adapted Inputs Indexes": [ 0, 1, 2, 3 ,4,5,6,7],

                      "Num Refs Per Input"    : 2,
                      "Input-References Info" :
                           [
                           //For BT mode, make sure we initialize same reference set for all target beams.
                               [ 5,  4],
                               [ 5,  4],
                               [ 5,  4],
                               [ 5,  4],
                               [ 5,  4],
                               [ 5,  4],
                               [ 5,  4],
                               [ 5,  4]
                           ],

                      "ReferenceTargetBeamSelector" : "ARA BT RefTarBeamSelector", //To make BT ARA use dynamic beam selection for inputs

                      "TailLen"               : 1536,
                      "MaxStepSize"           : 0.3,

                      "adaptBandLoHz"         : 0,
                      "adaptBandHiHz"         : 8000,

                      "leakyFactor"           : 0.4,
                      "DivFactorThd"          : 1.0,
                      "RegFactorScale"        : 1E-5,

                      "bandBasedTailLen"      : true,
                      "bandBasedStepSize"     : true,

                      "stepSizeRednScale"     : 3.0,
                      "stepSizeErrorScale"    : 3.0,

                      "EnergyStartFreqHz"               : 500,
                      "EnergyEndFreqHz"                 : 3500,
                      "KNoiseAlpha"                     : 0.999,
                      "KEnergyAlpha"                    : 0.75,
                      "KVssScaleFactorNr"               : 0.15,
                      "KVssScaleFactorDr"               : 0.5,
                      "VSS freeze threshold"            : 0.75,
                      "InitialFastConvergenceTimeSec"   : 15,
                      "Reset time in sec on silence"    : 900,  //15 minutes
                      "Use XCorr for VSS"               : true,


                      // AEC specific parameters
                      "RefSigEnThresh"        : 3.1623E-6,  // corresponds to wideband level of -55 dB (ref signal) power:10^(-55/10) = 3.162 E-6
                      "Enable VSS"            : true,

                      //Output gain params
                      "Gain step"                  : 0.2,
                      "Max gain ARA With Playback" : 2.0,
                      "Max gain ARA No Playback"   : 4.0,

                      // Round Robin Logic
                      "Ord2 to Ord1 ratio Percent"      : 50
                  },



           "ASR SerialARA BeamMerger":
                {
                    "SNRThreshold"                    : 1.0E-6,
                    "EnergyStartFreqHz"               : 500,
                    "EnergyEndFreqHz"                 : 3500,
                    "FDAlphaNoise"                    : 0.998,
                    "FDAlphaSpeech"                   : 0.65,
                    "KNoiseAlpha"                     : 0.999,
                    "KEnergyAlpha"                    : 0.75,
                    "KVssScaleFactor"                 : 0.5,
                    "InitialFastConvergenceTimeSec"   : 15
                },


            "ASR UlpwwBeamSelector":
               {
                    "BeamController mode"      : "ULPWW_ONLY",
                    "BeamController nBest"     : 2,
                    "Default beam index"       : 2,
                    "Ulpww Hangover in ms"     : 2000,
                    "Ulpww model file"         : "ulpww_50k.en-US.alexa.bin",
                    "Frame size in ms"         : 8
               },

            "ASR InterferenceLocalizer":
                {
                    "noiseAdaptationFactor"           : 0.99997,
                    "noiseThreshold"                  : 0.00004,    // -44dB
                    "noiseFloor"                      : 0.000001,  // -60dB
                    "DiffThreshold"                   : 2.3,
                    "accumulatePeriod"                : 37500,    //5 minutes
                    "subsetBeamNum"                   : 2
                },

            "ASR EarConDetector":
               {
                    "EC max timeout"                 : 5.0,
                    "EC intial timeout"              : 3.0,
                    "EC timeout cushion"             : 0.3,
                    "EC timeout queue size"          : 5,
                    "EC num mpaf bands"              : 128,
                    "EC num earcon bands"            : 18,
                    "EC total samples"               : 2,
                    "EC length"                      : 15,
                    "EC score threshold"             : 0.5,
                    "EC score total"                 : 5.0,
                    "EC detect alpha"                : 0.9,
                    "EC detected threshold"          : -20.0,  //Upper threshold for making Earcon (heard) decision
                    "EC not_detected threshold"      : -25.0  //Lower threshold for making Earcon (Not_heard) decision
               },

            "ASR Earcon FilterBank":
                {
                    "FFT Len"               : 256,
                    "Decimation Rate"       : 128,
                    "FilterLen"             : 512,
                    "AnaSynFilterCoefs"     : "hamming512_earcon.cfg"

                },

            "ASR Output Gain":
                {
                    "BoostdB"               : -10.0
                },

            "ASR FixedBeamFormer":
                {
                    "Num Source Beams"  : 8,
                    "Num Coefficients"  : 4,
                    "BeamFormingCoefs"  : "coefs_FBF_08.cfg"
                },

            "ASR RefBeamSelector":
                    {
                        "Second Beam Index"                   : 1,
                        "Ratio Beam Index"                    : 3,
                        "Threshold Beam Index"                : 3,
                        "Ratio Threshold"                     : 0.4,
                        "Smooth Fact Fast"                    : 0.83,
                        "Smooth Fact Slow"                    : 0.87,
                        "Num Frames For Transition"           : 80
                    },


            "ASR AdaptiveBeamFormer":
                {
                    // The number of inputs of the FBF is set-up at run-time, it's the number of microphones in the system
                    "FixedBeamFormer"   : "ASR FixedBeamFormer",

                    // The number of inputs of the ANC is set-up at run-time, it's the number of beams (outputs of FBF)
                    // "Adapted Inputs Indexes": [ 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11 ],
                    "Num Beams"             : 8,

                    // Generic Canceler : ANC
                    "Num Refs Per Input"    : 2,        // 2 nulls per beam

                            // subset of the source beams, with adaptation
                            // index   0   1   2   3   4   5   6   7   8   9  10  11
                            // Angles  0  30  60  90 120 150 180 210 240 270 300 330
                            "Input-References Info" :
                            [

                                [ 4,  5],
                                [ 4,  5],
                                [ 2,  3],
                                [ 2,  3],
                                [ 0,  1],
                                [ 2,  3],
                                [ 0,  1],
                                [ 0,  1]
                            ],

                    "TailLen"               : 1536,
                    "MaxStepSize"           : 0.1,
                    "adaptBandLoHz"         : 200,
                    "adaptBandHiHz"         : 8000,

                    "leakyFactor"           : 0.8,
                    "DivFactorThd"          : 20.0,
                    "RegFactorScale"        : 20E-5,

                    "bandBasedTailLen"      : false,
                    "bandBasedStepSize"     : false,

                    "stepSizeRednScale"     : 5.0,
                    "stepSizeErrorScale"    : 5.0,


                    // ANC specific parameters
                    "RefSigEnThresh"        : 0,
                    "Enable VSS"            : true,
                    "Enable RoundRobin"     : true,

                    "VSSLoHz"               : 500, // VSSHz must be included in AdaptHz range
                    "VSSHiHz"               : 4000
                },

            "VOIP FilterBank":
                {
                    "FFT Len"               : 256,
                    "Decimation Rate"       : 128,
                    "FilterLen"             : 1024,
                    "AnaSynFilterCoefs"     : "coefs_FilterBank_AnalysisSynthesis_1024.cfg"
                },

            "VOIP Flex Beam Former":
               {
                   // Downsampler parameters
                   // Automatically enabled if required for Mic or Ref based on ASR

                   // Currently only supports "FlexBeamFormer_4Mic_1Ref"
                   "Algorithm"                   : "FlexBeamFormer_4Mic_1Ref",

                   // FlexBF parameters
                   "NMics"     : 4,            // Only supports 4 mics
                   "NRefs"     : 1,            // Only supports 1 ref
                   "Mic Order" : [0, 1, 2, 3], // Order of mics to algorithm. Must be equal to number of mics

                   // Gain Ramp
                   "Enable Gain Ramp" : true, // If true, must provide gain ramp parameters

                   // First call gain ramp up parameters. If not available, first call will be same as other calls
                   "Reboot Ramp Up Time Constant (ms)"  : 250.0,
                   "Reboot Delay Counter (ms)"          : 500.0,
                   "Reboot Initial Gain (dB)"           : -80,
                   "Reboot Ramp Type"                   : "EXP", //LINEAR or EXP    

                   // Gain ramp up parameters
                   "Ramp Up Time Constant (ms)"  : 250.0,
                   "Delay Counter (ms)"          : 250.0,
                   "Initial Gain (dB)"           : -80,
                   "Ramp Type"                   : "EXP", //LINEAR or EXP

                    // AGC
                    "Enable FBAGC"                  : true, // If true, must provide AGC parameters

                    "txPath"                        : true,

                    "numBands"                      : 128,
                    "frameLength"                   : 128,
                    "sampleRate"                    : 16000,
                    "channelCount"                  : 1,

                    "bypass"                        : false,
                    "targetLeveldB"                 : -23,
                    "constantGaindB"                : 0,
                    "gainSmoothingFactor"           : 0.02,  //smoothing applied right before the dB gain is converted to linear

                    "noiseGainDecayRate"            : 0.0002,
                    "noiseAdditionalAttenuatedB"    : 10,

                    // gain limiting
                    "maxGaindB"                     : 12,
                    "minGaindB"                     : -20,
                    "maxGainIncRate"                : 500,    // centi-dB/sec
                    "maxGainDecRate"                : 500,    // centi-dB/sec

                    "SNRSmoothingConstant"          : 0.001,
                    "SNRThreshold4GainAdjstdB"      : 10,

                    // FBL settings
                    "fblThreshdB"                   : -10,
                    "fblInputVoldB"                 : 0.0,
                    "fblRelease"                    : 180.0,
                    "fblLookAheadms"                : 2.0,

                    "resAveGainThresh"              : 0.3,

                    // long-term RMS tracking parameters
                    "rmsAttack"                     : 0.05,
                    "rmsFastAttack"                 : 0.1,
                    "rmsAttackEventLimit"           : 10,
                    "rmsDecay"                      : 0.0005,
                    "rmsFastDecay"                  : 0.001,
                    "rmsDecayEventLimitShort"       : 4,
                    "rmsDecayEventLimitLong"        : 40,
                    "VAD0CountThreshold"            : 100,

                    // VAD parameters
                    "envAttack"                     : 0.97,
                    "envDecay"                      : 0.008,
                    "envFastDecay"                  : 1.0,
                    "envCountLim"                   : 2,
                    "VADThresholddB"                : 10.0,
                    "minFloordB"                    : -90,
                    "minSignaldB"                   : -70,
                    "noiseAttackRateSlow"           : 0.0005,
                    "noiseAttackRateFast"           : 0.0015,
                    "noiseAttackCountThrshld"       : 100,
                    "noiseReleaseRate"              : 0.04
               },

            "VOIP AcousticEchoCanceler":
                {
                    "Num Refs Per Input"    : 1,

                    "TailLen"               : 3840,
                    "MaxStepSize"           : 0.5,
                    "adaptBandLoHz"         : 100,
                    "adaptBandHiHz"         : 8000,

                    "leakyFactor"           : 1.0,
                    "DivFactorThd"          : 1.0,
                    "RegFactorScale"        : 1E-5,

                    "bandBasedTailLen"      : true,
                    "bandBasedStepSize"     : true,

                    "stepSizeRednScale"     : 5.0,
                    "stepSizeErrorScale"    : 5.0,

                    // AEC specific parameters
                    "RefSigEnThresh"        : 3.1623E-6,  // corresponds to wideband level of -55 dB (ref signal) power:10^(-55/10) = 3.162 E-6
                    "Enable VSS"            : true,

                    // subDuplex specific parameters
                    "subDuplexMode"                    : true,
                    "subDuplexSBstart"                 : 4,
                    "subDuplexSBstop"                  : 110,
                    "subDuplexNumVads"                 : 10,
                    "subDuplexNoiseClsfrVAD"           : 5,           // to disable set equal to subDuplexNumVads
                    "subDuplexAttenuationDelay"        : 40,          // to disable set to 0
                    "subDuplexGainAttack"              : 0.0156,
                    "subDuplexMinimumAttenuation"      : 0.0,         // to disable set to 0
                    "subDuplexMinimumAttnThresh"       : 0.1,
                    "subDuplexVadMinNoiseReduction"    : 0.1,
                    "subDuplexVadEnvAttack"            : 5.000000E-01,
                    "subDuplexVadEnvDecay"             : 1.562500e-02,
                    "subDuplexVadEnvFastDecay"         : 0.7,
                    "subDuplexVadEnvCountLim"          : 15,
                    "subDuplexVadFlrAttack"            : 3.050000E-05,
                    "subDuplexVadFlrDecay"             : 2.500000E-01,
                    "subDuplexVadFlrFastAttack"        : 7.810000E-03,
                    "subDuplexVadFlrCountLim"          : 1250,
                    "subDuplexVadFlrMinDelta"          : 10,
                    "subDuplexVadInitialNoiseLevel"    : 1.5E-3,
                    "subDuplexVadMinNoiseLevel"        : 1.5E-3,
                    "subDuplexVadFlrMstatLength"       : 1000,
                    "subDuplexVadFlrMstatSubFrms"      : 10,

                    // Round Robin Logic
                    "Ord2 to Ord1 ratio Percent"      : 50
                },

            "Frequency Masking RES":
                {
                    "numVolume"             : 10,
                    "aecVssSumTh"           : 60,  // To enable vss convergence check, set this to 40

                    // There are 10 values per parameter: One per volume
                    //                         Vol1,        Vol2,       Vol3,       Vol4,       Vol5,       Vol6,       Vol7,       Vol8,       Vol9,       Vol10
                    "smoothFactorPower"     : [0.93,        0.93,       0.94,       0.94,       0.95,       0.95,       0.95,       0.95,       0.96,       0.96    ],
                    "farTh"                 : [7.3871e-09,  7.3871e-09, 7.3871e-09, 7.3871e-09, 7.3871e-09, 4.8903e-08, 1e-09,      1e-09,      1e-09,      1e-09   ],
                    "avgGainLowTh"          : [0.25484,     0.25484,    0.25484,    0.25484,    0.25484,    0.17742,    0.43548,    0.43548,    0.43548,    0.43548 ],
                    "avgAttX"               : [0.04,        0.04,       0.04,       0.04,       0.04,       0.04,       0.0001,     0.0001,     0.0001,     0.0001  ],
                    "avgGainHighTh"         : [0.9392,      0.9392,     0.9392,     0.9392,     0.9392,     0.9392,     0.7598,     0.7598,     0.7598,     0.7598  ],
                    "statHigh"              : [0.999,       0.999,      0.999,      0.999,      0.999,      0.999,      0.9829,     0.9829,     0.9829,     0.9829  ],
                    "statWidth"             : [0.01,        0.01,       0.01,       0.01,       0.01,       0.01,       0.041613,   0.041613,   0.041613,   0.041613],
                    "gainInc"               : [0.36806,     0.36806,    0.36806,    0.36806,    0.36806,    0.5829,     0.75,       0.75,       0.75,       0.75    ],
                    "smoothFactorGainRise"  : [0.46,        0.46,       0.46,       0.46,       0.46,       0.42,       0.39,       0.35,       0.35,       0.1     ],
                    "smoothFactorGainFall"  : [0.789742,    0.789742,   0.789742,   0.789742,   0.789742,   0.68,       0.632194,   0.532194,   0.532194,   0.2     ],
                    "erleAecFactor"         : [12.0,        12.0,       12.0,       10.0,       8.0,        6.0,        6.0,        4.0,        2.0,        2.0     ],
                    "erleAecAttX"           : [0.01,        0.01,       0.01,       0.01,       0.01,       0.01,       0.008,      0.005,      0.001,      0.001   ],
                    "dtdSmoothUp"           : [0.9,         0.9,        0.9,        0.9,        0.9,        0.9,        0.9,        0.6,        0.5,        0.5     ],
                    "dtdSmoothDown"         : [0.98,        0.98,       0.98,       0.98,       0.98,       0.98,       0.96,       0.8,        0.7,        0.7     ],
                    "dtdDecisionTh"         : [0.9,         0.9,        0.9,        0.9,        0.9,        0.8,        0.68,       0.5,        0.4,        0.4     ],
                    "eesEnergyThresh"       : [4E-8,       4E-8,       4E-8,       4E-8,       4E-8,       4E-8,       4E-8,       4E-8,       4E-8,       4E-8     ],
                    "eesMaskGainThresh"     : [0.9,         0.9,        0.9,        0.9,        0.9,        0.9,        0.9,        0.9,        0.9,        0.9     ],
                    "eesGainFactor"         : [0.01,       0.01,       0.01,       0.01,       0.01,       0.01,       0.01,       0.01,       0.01,       0.01     ]
                },

            "VOIP VAEC" :
                {
                    "bypass"                             : false,
                    "muMin"                              : 0.01,   // min step-size
                    "muMax"                              : 0.75,   // max step-size
                    "adaptLeakFactor"                    : 1.0,    // set to less than 1 for leaky adaptive filter
                    "minIter"                            : 3,      // min number of iterations
                    "maxIter"                            : 3,      // max number of iterations
                    "refPwrVSSMdPt"                      : 0.01,   // sigmoid mid-point for ref-power based VSS
                    "refPwrVSSSlp"                       : 10.0,     // sigmoid slope for ref-power based VSS
                    "velVSSMdPt"                         : 0.0,    // sigmoid mid-point for velocity-based VSS
                    "velVSSSlp"                          : 1.0,    // sigmoid slope for velocity-based VSS
                    "soundSpeed"                         : 343.0,  // sound speed in m/s
                    "maxVelocity"                        : 0.75,   // max velocity in m/s
                    "dopSprdMdPt"                        : 0.125,  // sigmoid mid-point for Doppler spread based num iterations
                    "dopSprdSlp"                         : 10,     // sigmoid slope for Doppler spread based num iterations
                    "tailLenSec"                         : 300e-3, // Tail length in seconds
                    "samplingFrequency"                  : 16000.0, // sampling frequency in Hz
                    "velSmoothingCoef"                   : 0.95,
                    "velUpdateThreshold"                 : 5,

                    "Enable Velocity Based VSS"          : false,
                    "Enable Ref Pow Based VSS"           : true,
                    "Enable Adapt Num Iteration"         : false,
                    "Enable Adapt Tail Length"           : false,

                    // RVSS - Robust Variable Step-Size
                    "Enable RVSS"                        : true,
                    "RVSS Delta Min"                     : 0.1,
                    "RVSS Delta Init"                    : 10.0,
                    "RVSS Time Constant (sec)"           : 10.0
               },

            "Frequency Masking Lite RES":
                {
                    "numVolume"             : 10,
                    "aecVssSumTh"           : 100000, // do not use with RAEC

                    "maskFreqSmoothTc"      : 0.0,
                    "maskTimeSmoothTc"      : 0.0,
                    "erleUpTh"              : 1.0,
                    "attnFactorScale"       : 1.0,

                    // There are 10 values per parameter: One per volume
                    //                               Vol1,      Vol2,      Vol3,      Vol4,      Vol5,      Vol6,      Vol7,      Vol8,      Vol9,     Vol10
                    "smoothFactorPower"     : [       0.0,       0.0,       0.0,       0.0,       0.0,       0.0,       0.0,       0.0,       0.0,       0.0],
                    "statHigh"              : [       2.0,       2.0,       3.0,       3.0,       4.0,       4.0,       5.0,       5.0,       6.0,       6.0],
                    "dtdSmoothUp"           : [       0.5,       0.5,       0.5,       0.5,       0.5,       0.5,       0.5,       0.5,       0.5,       0.5],
                    "dtdSmoothDown"         : [       0.8,       0.8,       0.8,       0.8,       0.8,       0.8,       0.8,       0.8,       0.8,       0.8],
                    "dtdDecisionTh"         : [      0.25,      0.25,      0.25,      0.25,      0.25,      0.25,      0.25,      0.25,      0.25,      0.25],
                    "eesEnergyThresh"       : [      4E-7,      4E-7,      4E-7,      4E-7,      4E-7,      4E-7,      4E-7,      4E-7,      4E-7,      4E-7],
                    "eesMaskGainThresh"     : [       0.9,       0.9,       0.9,       0.9,       0.9,       0.9,       0.9,       0.9,       0.9,       0.9],
                    "eesGainFactor"         : [      0.01,      0.01,      0.01,      0.01,      0.01,      0.01,      0.01,      0.01,      0.01,      0.01]
              },

            "Recursive Magnitude Estimation NR":
            {
                "bypass"        : false,
                "numBands"      : 128,
                "numChannels"       : 1,
                "filterWidth"       : 0,
                "inputAdaptationFactor" : 0.8,
                "noiseAdaptationFactor" : 1.005,
                "noiseIncMin"       : 1E-6,
                "noiseAmpFactor"    : 10.0,
                "gainExponent"      : 1.0,
                "peakAdaptationFactor"  : 0.9995,
                "noiseInputRatio"   : 1000, // this value basically disables the feature
                "initMag"       : 1E-3,
                "ERLEthreshold"     : 15.85 // ERLE ratio: 24dB
            },

            "Random Filler CNG":
            {
                "bypass"            : false,
                "numBands"          : 128,
                "numChannels"       : 1
            },

            "Automatic Gain Control":
                {
                    // Number of sub-bands should be 1/2 of "VOIP FilterBank":"FFT Len".
                    "NumBands"                      : 128,
                    "SampleRate"                    : 16000,
                    "NumRefFrame"                   : 5,
                    "SnrCountThLevel0"              : 3,
                    "SnrCountThLevel1"              : 4,
                    "SnrCountThLevel2"              : 6,
                    "InputAdaptFactor"              : 0.8,
                    "NoiseAdaptFactor"              : 1.0005,
                    "NoiseIncMin"                   : 0.000001,
                    "NoiseMagMax"                   : 0.3162,
                    "SnrMaxdB"                      : 80.0,
                    "SnrMindB"                      : 0.0,
                    "SnrThdB"                       : 10.0,
                    "VoiceSnrThLevel0dB"            : 12.0,
                    "VoiceSnrThLevel1dB"            : 8.0,
                    "VoiceSnrThLevel2dB"            : 3.0,
                    "GainMaxdB"                     : 20.0,
                    "DesireddBFs"                   : -10.0,
                    "NoiseGateThdB"                 : -90.0,
                    "AttackTimeMs"                  : 500.0,
                    "ReleaseTimeMs"                 : 5000.0,
                    "InitGaindB"                    : 0.0,
                    "SlewRatedB"                    : 40.0,
                    "GuardBanddB"                   : 2.0,// New: 0.0. Old: 2.0
                    "DesireddBFsDelta"              : 0.5,// New: 0.0. Old: 0.5
                    "AgcResLimitAttackFbGainTh"     : -1,   // [0.0 1.0]. Set to -1 to disable AGC awareness of FB RES gains. This is a lower bound threshold.
                    "AgcResLimitSbGainSbGainTh"     : -1,   // [0.0 1.0]. Set to -1 to disable AGC awareness of SB RES gains. This is an upper bound threshold. Same value for all bands.
                    "AgcResSoftThEnabled"           : true
                },

            "FB Automatic Gain Control": //a.k.a. "full band AGC"
                {
                    "txPath" : true,

                    "numBands" : 128,
                    "frameLength" : 128,
                    "sampleRate" : 16000,
                    "channelCount" : 1,

                    "bypass" : false,
                    "targetLeveldB" : -23,           // in dB
                    "constantGaindB" : 20,           // in dB
                    "gainSmoothingFactor" : 0.02,  //smoothing applied right before the dB gain is converted to linear

                    "enableGainDecayGateByRES" : true,
                    "noiseGainDecayRate" : 0.00012, // was 0.0002
                    "noiseAdditionalAttenuatedB" : 4.5, // was 10

                    // gain limiting
                    "maxGaindB" : 12,
                    "minGaindB" : -20,
                    "maxGainIncRate" : 500,    // centi-dB/sec
                    "maxGainDecRate" : 500,    // centi-dB/sec

                    "SNRSmoothingConstant" : 0.001,
                    "SNRThreshold4GainAdjstdB" : 0, // was 10

                    // Compressor settings
                    "compressorAttack" : 0.5,
                    "compressorDecay"  : 0.09,
                    "compressorThresholdDB"  : -20.0,
                    "compressorRatio"  : 100.0,

                    "resAveGainThresh" : 0.5,

                    // long-term RMS tracking parameters
                    "rmsAttack" : 0.05,
                    "rmsFastAttack" : 0.1,
                    "rmsAttackEventLimit" : 10,
                    "rmsDecay" : 0.0005,
                    "rmsFastDecay" : 0.001,
                    "rmsDecayEventLimitShort" : 4,
                    "rmsDecayEventLimitLong" : 40,
                    "VAD0CountThreshold" : 100,

                    // VAD parameters
                    "envAttack" : 0.97,
                    "envDecay" : 0.008,
                    "envFastDecay" : 1.0,
                    "envCountLim" : 2,
                    "VADThresholddB" : 10.0,
                    "minFloordB" : -90,
                    "minSignaldB" : -70,
                    "noiseAttackRateSlow" : 0.0005,
                    "noiseAttackRateFast" : 0.0015,
                    "noiseAttackCountThrshld" : 100,
                    "noiseReleaseRate" : 0.04
                },

           "GainRampUp":
                {
                   "Ramp Up Time Constant (ms)"  : 1500.0,
                   "Delay Counter (ms)"          : 0.0,
                   "Initial Gain (dB)"           : -200,
                   "Ramp Type"                   : "LINEAR" //LINEAR or EXP
                },

            "Automatic Volume Leveling":
                {
                    "Bypass AVL"            : true,
                    "AVL_music_volTab"      :
                        [ -64, -62, -60, -58, -55, -52, -49, -44, -39, -34,
                          -29, -27, -25, -23, -21, -20, -19, -18, -17, -16,
                          -15, -14, -13, -12, -11, -9,  -7,  -5,  -3,  -1, 0
                        ],
                    "AVL_TTS_volTab"        :
                        [ -64, -62, -60, -58, -55, -52, -49, -44, -39, -34,
                          -29, -27, -25, -23, -21, -20, -19, -18, -17, -16,
                          -15, -14, -13, -12, -11, -9,  -7,  -5,  -3,  -1, 0
                        ]
                },

            "VOIP Tx Limiter":
                {
                    "lim_bypassed"        : false,
                    "lim_inVol"           : 0.0,
                    "lim_thresh"          : -1.0,
                    "lim_release"         : 180.0,
                    "lim_lookAheadTimeMs" : 2.0
                },

            //"UserEQ":
            //{
            //        "External Config"   :  "UserEQ.cfg"
            //},
            //"MBCL":
            //    {
            //        "External Config"  : [ "MBCL.cfg" ]
            //    },

            //"Equalizer FIR":
            //    {
            //        "Bypass"                : false,
            //        "External Coefficients" : [ "EQ_50.cfg", "EQ_60.cfg", "EQ_70.cfg", "EQ_80.cfg", "EQ_90.cfg", "EQ_100.cfg"],
            //        "Volume Boundary"       : [ 50, 60, 70, 80, 90, 100 ]  // The last number needs to be 100
            //    },

            "HPF 80Hz @ 16K":
                {
                    "Bypass"            : false,
                    "Coefficients"      :
                        [
                             -1.978964742877471,  -1.920823752121581,  -1.995031240858690, 0   , // a1
                             0.980148787818626,    0.923195725460049,   0.995935784603137, 0   , // a2
                             2.061764283274676,   12.481101519210988,   0.036465860122281, 1.0 , // b0
                             -4.12286229274,     -24.9615622297,       -0.07291290428,     0   , // b1
                             2.061764283274676,   12.481101519210988,   0.036465860122281, 0     // b2
                        ]
                },

            "Downsampler IIR":
                {
                    // taken from Knight (lpfIIRFilterCoeffs16Kat48K.h), after they have been normalized by dividing all the coefficients by a0
                    // in iirFilterMono.cpp::init()
                    "Coefficients"      :
                        [
                            -1.35381400585174560547,-1.16845381259918212891,-1.09131717681884765625,-0.74153685569763183594, // a1
                             0.67048937082290649414, 0.85192829370498657227, 0.96150147914886474609, 0.00000000000000000000, // a2
                             0.03503995016217231750, 0.48894411325454711914, 0.74522399902343750000, 0.50676357746124267578, // b0
                             0.01067659538239240646,-0.29441374540328979492,-0.62026363611221313477, 0.50676357746124267578, // b1
                             0.03503995016217231750, 0.48894411325454711914, 0.74522399902343750000, 0.00000000000000000000  // b2
                        ]
                },

            "Voice Activity Detector":
                {
                    // Device side bias factors always set to 1.0f. Bias factors are applied on the cloud.
                    "Ambient Gain"  : 1.0,
                    "Voice Gain"    : 1.0,

                    // Device gain values from AUDIOALG-18066
                    "System Gain Available"         : true,
                    "PGA Gain"                      : 18.0,
                    "ADC Gain"                      : 0.0,
                    "AFE In Gain"                   : 0.0,
                    "AFE Out Gain"                  : -10.0,
                    "referenceAudioLevelOutputInDb" : -52,
                    "referenceOneMicAudioLevelOutputInDb" : 0 // To be calibrated
                },

          "EspFeatureExtraction":
                {
                  "bypass":       false
                },

          "Mics Post AEC Output Gain":
                {
                  "BoostdB"               : 0 // To be calibrated
                }
        }
}
