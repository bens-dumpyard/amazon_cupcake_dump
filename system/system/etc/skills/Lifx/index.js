/*! For license information please see index.js.LICENSE.txt */
var Skill=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=29)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LifXMessage=void 0;var n=function(){function e(t,r,n,o,i,a){this.source=t,this.target=r,this.resRequired=n,this.ackRequired=o,this.sequence=a,this.type=i,this.tagged=this.target===e.BROADCAST_MAC_ADDRESS}return e.prototype.toBinary=function(){var e=new ArrayBuffer(this.getMessageSize());return this.packHeader(e),this.packPayload(e),new Uint8Array(e)},e.prototype.getMessageSize=function(){return this.getHeaderSize()+this.getPayloadSize()},e.prototype.getHeaderSize=function(){return e.HEADER_SIZE},e.prototype.getTagged=function(){return this.tagged},e.prototype.getSource=function(){return this.source},e.prototype.getTarget=function(){return this.target},e.prototype.getResRequired=function(){return this.resRequired},e.prototype.getAckRequired=function(){return this.ackRequired},e.prototype.getSequence=function(){return this.sequence},e.prototype.getType=function(){return this.type},e.prototype.getPayloadSize=function(){return 0},e.prototype.packHeader=function(t){var r=new DataView(t),n=0;r.setUint16(n,this.getMessageSize(),!0),n+=2;var o=e.PROTOCOL;o|=(3&e.ORIGIN)<<14,o|=(this.tagged?1:0)<<13,o|=(e.ADDRESSABLE?1:0)<<12,r.setUint16(n,o,!0),n+=2,r.setUint32(n,this.source,!0),n+=4;for(var i=this.target.split(":"),a=0;a<i.length;a++)r.setUint8(n+a,parseInt(i[a],16));n+=14,r.setUint8(n,(this.resRequired?1:0)|(this.ackRequired?1:0)<<1),n+=1,r.setUint8(n,this.sequence),n+=9,r.setUint16(n,this.type,!0)},e.prototype.packPayload=function(e){},e.BROADCAST_MAC_ADDRESS="00:00:00:00:00:00",e.HEADER_SIZE=36,e.ADDRESSABLE=!0,e.ORIGIN=0,e.PROTOCOL=1024,e}();t.LifXMessage=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=function(){function e(e,t,r,o){this.requestId=n.v4(),this.requestMessage=e,this.transportProtocol=t,this.onSuccess=r,this.onFailure=o}return e.prototype.getRequestId=function(){return this.requestId},e.prototype.getTransportProtocol=function(){return this.transportProtocol},e.prototype.getRequestMessage=function(){return this.requestMessage},e.prototype.onSuccess=function(e){return this.onSuccessCallback(e)},e.prototype.onFailure=function(e){return this.onFailureCallback(e)},e}();t.RequestContext=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.RAW_TCP=0]="RAW_TCP",e[e.RAW_UDP=1]="RAW_UDP",e[e.HTTP=2]="HTTP"}(t.TransportProtocol||(t.TransportProtocol={}))},function(e,t,r){var n=r(31),o=r(32),i=o;i.v1=n,i.v4=o,e.exports=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveResponseCreator=void 0;var n=r(35),o=r(3),i=r(5),a=r(18),s=r(38),u=r(20),c=r(21),p=r(22),l=r(23),f=function(){function e(){}return e.createResponse=function(e,t){return{context:t,event:{endpoint:{endpointId:e},header:{messageId:o.v4(),name:"Response",namespace:"Alexa",payloadVersion:"3"},payload:{}}}},e.createErrorResponse=function(e,t,r){void 0===r&&(r="");var n={event:{header:{messageId:o.v4(),name:"ErrorResponse",namespace:"Alexa",payloadVersion:"3"},payload:{message:t,type:e}}};return""!==r&&(n.event.endpoint={endpointId:r}),n},e.createDiscoveryResponse=function(t){var r=t.executionInfo.responses[p.StateVersionMessage.TYPE],i=s.ProductInfoHelper.getProductInformation(r.getVendor(),r.getProduct());if(null===i)throw new Error("VID: "+r.getVendor()+", PID: "+r.getProduct()+" not found in product info file.");console.debug(e.className+":: context.executionInfo.responses: "+JSON.stringify(t.executionInfo.responses));var a=t.executionInfo.responses[c.StateLabelMessage.TYPE],l=t.executionInfo.responses[u.StateHostFirmwareMessage.TYPE];return{event:{header:{messageId:o.v4(),name:"Discover.Response",namespace:"Alexa.Discovery",payloadVersion:"3"},payload:{endpoints:[{additionalAttributes:{customIdentifier:t.executionInfo.macAddress,firmwareVersion:l.getVersionMajor()+"."+l.getVersionMinor(),model:i.product.name},capabilities:i.capabilities,connections:[{macAddress:t.executionInfo.macAddress,type:"UDP_IP"}],cookie:{macAddress:t.executionInfo.macAddress,productFeatures:JSON.stringify(i.product.features)},description:i.product.name,displayCategories:["LIGHT"],endpointId:n(e.SKILL_NAME+t.executionInfo.macAddress),friendlyName:a.getLabel(),manufacturerName:i.vendorName}]}}}},e.createPowerOffResponse=function(t){return e.createResponse(t.endpointId,{properties:[{name:"powerState",namespace:"Alexa.PowerController",timeOfSample:(new Date).toUTCString(),uncertaintyInMilliseconds:0,value:"OFF"}]})},e.createDeviceStateResponse=function(t){var r=[];return e.pushPowerStateProperty(r,t),e.pushLightStateProperties(r,t),e.createResponse(t.endpointId,{properties:r})},e.pushPowerStateProperty=function(e,t){var r,n=t.executionInfo.responses;if(void 0!==(null==n?void 0:n[a.LightStatePowerMessage.TYPE]))r=n[a.LightStatePowerMessage.TYPE].getLevel();else{if(void 0===(null==n?void 0:n[i.LightStateMessage.TYPE]))return;r=n[i.LightStateMessage.TYPE].getPower()}e.push({name:"powerState",namespace:"Alexa.PowerController",timeOfSample:(new Date).toUTCString(),uncertaintyInMilliseconds:0,value:l.UnitConverter.powerFromLifx(r)})},e.pushLightStateProperties=function(t,r){var n,o,a=r.executionInfo.responses[i.LightStateMessage.TYPE],u=JSON.parse(null!==(o=null===(n=r.cookie)||void 0===n?void 0:n.productFeatures)&&void 0!==o?o:"{}");void 0!==a&&s.ProductInfoHelper.supportsBrightness(u)&&(e.pushBrightnessProperty(t,a),!0===u.color&&e.pushColorProperty(t,a),!0===u.isOkToReportCT&&s.ProductInfoHelper.supportsColorTemperature(u)&&e.pushColorTemperatureProperty(t,a))},e.pushBrightnessProperty=function(e,t){e.push({name:"brightness",namespace:"Alexa.BrightnessController",timeOfSample:(new Date).toUTCString(),uncertaintyInMilliseconds:0,value:l.UnitConverter.brightnessFromLifx(t.getBrightness())})},e.pushColorProperty=function(e,t){e.push({name:"color",namespace:"Alexa.ColorController",timeOfSample:(new Date).toUTCString(),uncertaintyInMilliseconds:0,value:{brightness:l.UnitConverter.colorBrightnessFromLifx(t.getBrightness()),hue:l.UnitConverter.hueFromLifx(t.getHue()),saturation:l.UnitConverter.saturationFromLifx(t.getSaturation())}})},e.pushColorTemperatureProperty=function(e,t){e.push({name:"colorTemperatureInKelvin",namespace:"Alexa.ColorTemperatureController",timeOfSample:(new Date).toUTCString(),uncertaintyInMilliseconds:0,value:l.UnitConverter.colorTemperatureFromLifx(t.getKelvin())})},e.className="DirectiveResponseCreator",e.SKILL_NAME="LIFX",e}();t.DirectiveResponseCreator=f},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LightStateMessage=void 0;var i=r(17),a=r(0),s=r(6),u=r(7),c=function(e){function t(r,n,o,i,a,s,u,c,p,l,f){void 0===s&&(s=0),void 0===u&&(u=0),void 0===c&&(c=65535),void 0===p&&(p=3500),void 0===l&&(l=0),void 0===f&&(f="");var d=e.call(this,r,n,o,i,t.TYPE,a)||this;return d.hue=s,d.saturation=u,d.brightness=c,d.kelvin=p,d.power=l,d.label=f,d}return o(t,e),t.create=function(e,r,n,o,i,a){var s=new t(e,r,n,o,i);return s.parsePayload(a),s},t.prototype.getHue=function(){return this.hue},t.prototype.getSaturation=function(){return this.saturation},t.prototype.getBrightness=function(){return this.brightness},t.prototype.getKelvin=function(){return this.kelvin},t.prototype.getPower=function(){return this.power},t.prototype.getLabel=function(){return this.label},t.prototype.setHue=function(e){this.hue=e},t.prototype.setSaturation=function(e){this.saturation=e},t.prototype.setKelvin=function(e){this.kelvin=e},t.prototype.setBrightness=function(e){this.brightness=e},t.prototype.setPower=function(e){this.power=e},t.prototype.isValidRequest=function(e){switch(e){case s.LightGetColorMessage.TYPE:case u.LightSetWaveformOptionalMessage.TYPE:return!0}return!1},t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.prototype.packPayload=function(e){var t=new i.DataViewWrapper(e,this.getHeaderSize());t.packUint16(this.hue),t.packUint16(this.saturation),t.packUint16(this.brightness),t.packUint16(this.kelvin),t.packReserved(2),t.packUint16(this.power),t.packString(this.label,32),t.packReserved(8),t.expectSize(this.getHeaderSize()+this.getPayloadSize(),"LightStateMessage:packPayload")},t.prototype.parsePayload=function(e){var t=new i.DataViewWrapper(e);this.hue=t.unpackUint16(),this.saturation=t.unpackUint16(),this.brightness=t.unpackUint16(),this.kelvin=t.unpackUint16(),t.unpackReserved(2),this.power=t.unpackUint16(),this.label=t.unpackString(32),t.unpackReserved(8),t.expectSize(this.getPayloadSize(),"LightStateMessage:parsePayload")},t.TYPE=107,t.PAYLOAD_SIZE_IN_BYTES=52,t}(a.LifXMessage);t.LightStateMessage=c},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LightGetColorMessage=void 0;var i=function(e){function t(r,n,o,i,a){return e.call(this,r,n,o,i,t.TYPE,a)||this}return o(t,e),t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.TYPE=101,t.PAYLOAD_SIZE_IN_BYTES=0,t}(r(0).LifXMessage);t.LightGetColorMessage=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LightSetWaveformOptionalMessage=void 0;var i=r(17),a=function(e){function t(r,n,o,i,a,s,u,c,p,l,f,d,g,h,m,_,v,y){void 0===s&&(s=!1),void 0===u&&(u=65535),void 0===c&&(c=!1),void 0===p&&(p=0),void 0===l&&(l=!1),void 0===f&&(f=0),void 0===d&&(d=!1),void 0===g&&(g=3500),void 0===h&&(h=1e3),void 0===m&&(m=0),void 0===_&&(_=1),void 0===v&&(v=0),void 0===y&&(y=!1);var S=e.call(this,r,n,o,i,t.TYPE,a)||this;return S.setBrightness=s,S.brightness=u,S.setHue=c,S.hue=p,S.setSaturation=l,S.saturation=f,S.setKelvin=d,S.kelvin=g,S.period=h,S.waveform=m,S.cycles=_,S.skewRatio=v,S.transient=y,S}return o(t,e),t.create=function(e,r,n,o,i,a){var s=new t(e,r,n,o,i);return s.parsePayload(a),s},t.prototype.getSetBrightness=function(){return this.setBrightness},t.prototype.getBrightness=function(){return this.brightness},t.prototype.getSetHue=function(){return this.setHue},t.prototype.getHue=function(){return this.hue},t.prototype.getSetSaturation=function(){return this.setSaturation},t.prototype.getSaturation=function(){return this.saturation},t.prototype.getSetKelvin=function(){return this.setKelvin},t.prototype.getKelvin=function(){return this.kelvin},t.prototype.getPeriod=function(){return this.period},t.prototype.getWaveform=function(){return this.waveform},t.prototype.getCycles=function(){return this.cycles},t.prototype.getSkewRatio=function(){return this.skewRatio},t.prototype.getTransient=function(){return this.transient},t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.prototype.packPayload=function(e){var t=new i.DataViewWrapper(e,this.getHeaderSize());t.packReserved(1),t.packBoolInt(this.transient),t.packUint16(this.hue),t.packUint16(this.saturation),t.packUint16(this.brightness),t.packUint16(this.kelvin),t.packUint32(this.period),t.packFloat32(this.cycles),t.packInt16(this.skewRatio),t.packUint8(this.waveform),t.packBoolInt(this.setHue),t.packBoolInt(this.setSaturation),t.packBoolInt(this.setBrightness),t.packBoolInt(this.setKelvin),t.expectSize(this.getHeaderSize()+this.getPayloadSize(),"LightSetWaveformOptionalMessage:packPayload")},t.prototype.parsePayload=function(e){var t=new i.DataViewWrapper(e);t.unpackReserved(1),this.transient=t.unpackBoolInt(),this.hue=t.unpackUint16(),this.saturation=t.unpackUint16(),this.brightness=t.unpackUint16(),this.kelvin=t.unpackUint16(),this.period=t.unpackUint32(),this.cycles=t.unpackFloat32(),this.skewRatio=t.unpackInt16(),this.waveform=t.unpackUint8(),this.setHue=t.unpackBoolInt(),this.setSaturation=t.unpackBoolInt(),this.setBrightness=t.unpackBoolInt(),this.setKelvin=t.unpackBoolInt(),t.expectSize(this.getPayloadSize(),"LightSetWaveformOptionalMessage:parsePayload")},t.TYPE=119,t.PAYLOAD_SIZE_IN_BYTES=25,t}(r(0).LifXMessage);t.LightSetWaveformOptionalMessage=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.GetHostFirmwareMessage=void 0;var i=function(e){function t(r,n,o,i,a){return e.call(this,r,n,o,i,t.TYPE,a)||this}return o(t,e),t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.TYPE=14,t.PAYLOAD_SIZE_IN_BYTES=0,t}(r(0).LifXMessage);t.GetHostFirmwareMessage=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.GetLabelMessage=void 0;var i=function(e){function t(r,n,o,i,a){return e.call(this,r,n,o,i,t.TYPE,a)||this}return o(t,e),t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.TYPE=23,t.PAYLOAD_SIZE_IN_BYTES=0,t}(r(0).LifXMessage);t.GetLabelMessage=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.GetVersionMessage=void 0;var i=function(e){function t(r,n,o,i,a){return e.call(this,r,n,o,i,t.TYPE,a)||this}return o(t,e),t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.TYPE=32,t.PAYLOAD_SIZE_IN_BYTES=0,t}(r(0).LifXMessage);t.GetVersionMessage=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.AcknowledgementMessage=void 0;var i=function(e){function t(r,n,o,i,a){return e.call(this,r,n,o,i,t.TYPE,a)||this}return o(t,e),t.prototype.isValidRequest=function(e){return!0},t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.TYPE=45,t.PAYLOAD_SIZE_IN_BYTES=0,t}(r(0).LifXMessage);t.AcknowledgementMessage=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(30);t.HttpRequestContext=n.HttpRequestContext;var o=r(1);t.RequestContext=o.RequestContext;var i=r(33);t.TCPRequestContext=i.TCPRequestContext;var a=r(2);t.TransportProtocol=a.TransportProtocol;var s=r(34);t.UDPRequestContext=s.UDPRequestContext},function(e,t){var r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(r){var n=new Uint8Array(16);e.exports=function(){return r(n),n}}else{var o=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),o[t]=e>>>((3&t)<<3)&255;return o}}},function(e,t){for(var r=[],n=0;n<256;++n)r[n]=(n+256).toString(16).substr(1);e.exports=function(e,t){var n=t||0,o=r;return[o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],"-",o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]],o[e[n++]]].join("")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionOrchestrator=void 0;var n=r(4),o=function(){function e(){}return e.prototype.orchestrate=function(e,t,r,o){var i=this;if(e.actions.length<1)return void 0===e.finalResponseCreator?r(null):e.finalResponseCreator.createResponse(t,r,o);e.actions.shift().perform(t,(function(){return i.orchestrate(e,t,r,o)}),(function(e){return o(n.DirectiveResponseCreator.createErrorResponse(e.type,e.message,t.endpointId))}))},e}();t.ActionOrchestrator=o},function(e,t){var r={utf8:{stringToBytes:function(e){return r.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(r.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t},bytesToString:function(e){for(var t=[],r=0;r<e.length;r++)t.push(String.fromCharCode(e[r]));return t.join("")}}};e.exports=r},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataViewWrapper=void 0;var n=function(){function e(e,t,r){void 0===t&&(t=0),void 0===r&&(r=!0),this.dataView=new DataView(e),this.currIndex=t,this.littleEndian=r}return e.prototype.packUint8=function(e){this.dataView.setUint8(this.currIndex,e),this.currIndex++},e.prototype.packBoolInt=function(e){this.dataView.setUint8(this.currIndex,e?1:0),this.currIndex++},e.prototype.packInt16=function(e){this.dataView.setInt16(this.currIndex,e,this.littleEndian),this.currIndex+=2},e.prototype.packUint16=function(e){this.dataView.setUint16(this.currIndex,e,this.littleEndian),this.currIndex+=2},e.prototype.packUint32=function(e){this.dataView.setUint32(this.currIndex,e,this.littleEndian),this.currIndex+=4},e.prototype.packFloat32=function(e){this.dataView.setFloat32(this.currIndex,e,this.littleEndian),this.currIndex+=4},e.prototype.packReserved=function(e,t){for(void 0===t&&(t=0);e>0;)this.dataView.setUint8(this.currIndex,t),this.currIndex++,e--},e.prototype.packString=function(e,t){for(var r=(new TextEncoder).encode(e),n=0;n<t;n++){var o=n<r.length?r[n]:0;this.dataView.setUint8(this.currIndex,o),this.currIndex++}},e.prototype.unpackUint8=function(){var e=this.dataView.getUint8(this.currIndex);return this.currIndex++,e},e.prototype.unpackBoolInt=function(){var e=0!==this.dataView.getUint8(this.currIndex);return this.currIndex++,e},e.prototype.unpackInt16=function(){var e=this.dataView.getInt16(this.currIndex,this.littleEndian);return this.currIndex+=2,e},e.prototype.unpackUint16=function(){var e=this.dataView.getUint16(this.currIndex,this.littleEndian);return this.currIndex+=2,e},e.prototype.unpackUint32=function(){var e=this.dataView.getUint32(this.currIndex,this.littleEndian);return this.currIndex+=4,e},e.prototype.unpackFloat32=function(){var e=this.dataView.getFloat32(this.currIndex,this.littleEndian);return this.currIndex+=4,e},e.prototype.unpackReserved=function(e){this.currIndex+=e},e.prototype.unpackString=function(e){for(var t=new Uint8Array(e),r=0;r<e;r++){var n=this.dataView.getUint8(this.currIndex+r);if(0===n){t=t.subarray(0,r);break}t[r]=n}return this.currIndex+=e,(new TextDecoder).decode(t)},e.prototype.expectSize=function(e,t){if(this.currIndex!==e){var r="Expected packet size "+e+", actual "+this.currIndex+" in "+t;throw console.error(r),new Error(r)}},e}();t.DataViewWrapper=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LightStatePowerMessage=void 0;var i=r(0),a=r(19),s=function(e){function t(r,n,o,i,a,s){var u=e.call(this,r,n,o,i,t.TYPE,a)||this;return u.level=s,u}return o(t,e),t.create=function(e,r,n,o,i,a){var s=t.parsePayload(a);return new t(e,r,n,o,i,s.level)},t.parsePayload=function(e){return{level:new DataView(e).getUint16(0,!0)}},t.prototype.getLevel=function(){return this.level},t.prototype.isValidRequest=function(e){return e===a.LightGetPowerMessage.TYPE},t.prototype.packPayload=function(e){var t=new DataView(e),r=this.getHeaderSize();t.setUint16(r,this.level,!0)},t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.TYPE=118,t.PAYLOAD_SIZE_IN_BYTES=2,t}(i.LifXMessage);t.LightStatePowerMessage=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LightGetPowerMessage=void 0;var i=function(e){function t(r,n,o,i,a){return e.call(this,r,n,o,i,t.TYPE,a)||this}return o(t,e),t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.TYPE=116,t.PAYLOAD_SIZE_IN_BYTES=0,t}(r(0).LifXMessage);t.LightGetPowerMessage=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.StateHostFirmwareMessage=void 0;var i=r(8),a=function(e){function t(r,n,o,i,a,s,u){var c=e.call(this,r,n,o,i,t.TYPE,a)||this;return c.versionMajor=s,c.versionMinor=u,c}return o(t,e),t.create=function(e,r,n,o,i,a){var s=t.parsePayload(a);return new t(e,r,n,o,i,s.versionMajor,s.versionMinor)},t.parsePayload=function(e){var t=new DataView(e),r=0;r+=16;var n=t.getUint16(r,!0);return r+=2,{versionMajor:t.getUint16(r,!0),versionMinor:n}},t.prototype.getVersionMajor=function(){return this.versionMajor},t.prototype.getVersionMinor=function(){return this.versionMinor},t.prototype.isValidRequest=function(e){return e===i.GetHostFirmwareMessage.TYPE},t.prototype.packPayload=function(e){var t=new DataView(e),r=this.getHeaderSize();r+=16,t.setUint16(r,this.versionMinor,!0),r+=2,t.setUint16(r,this.versionMajor,!0)},t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.TYPE=15,t.PAYLOAD_SIZE_IN_BYTES=20,t}(r(0).LifXMessage);t.StateHostFirmwareMessage=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.StateLabelMessage=void 0;var i=r(9);var a=function(e){function t(r,n,o,i,a,s){var u=e.call(this,r,n,o,i,t.TYPE,a)||this;return u.label=s.length>32?s.slice(0,32):s,u}return o(t,e),t.create=function(e,r,n,o,i,a){var s=t.parsePayload(a);return new t(e,r,n,o,i,s.label)},t.parsePayload=function(e){var r,n,o=new Uint8Array(e.slice(0,32)),i=t.decodeUtf8ToString(o);return{label:(n=(r=i).indexOf("\0"))>-1?r.substr(0,n):r}},t.encodeStringToUtf8=function(e,r,n){var o=(new t.TEXT_ENCODER_TYPE).encode(e);r.set(o,n)},t.decodeUtf8ToString=function(e){return new t.TEXT_DECODER_TYPE("utf-8").decode(e).replace(/\s+$/,"")},t.prototype.getLabel=function(){return this.label},t.prototype.isValidRequest=function(e){return e===i.GetLabelMessage.TYPE},t.prototype.packPayload=function(e){var r=new Uint8Array(e);t.encodeStringToUtf8(this.label,r,this.getHeaderSize())},t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.TYPE=25,t.TEXT_ENCODER_TYPE=TextEncoder,t.TEXT_DECODER_TYPE=TextDecoder,t.PAYLOAD_SIZE_IN_BYTES=32,t}(r(0).LifXMessage);t.StateLabelMessage=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.StateVersionMessage=void 0;var i=r(10),a=function(e){function t(r,n,o,i,a,s,u,c){var p=e.call(this,r,n,o,i,t.TYPE,a)||this;return p.vendor=s,p.product=u,p.version=c,p}return o(t,e),t.create=function(e,r,n,o,i,a){var s=t.parsePayload(a);return new t(e,r,n,o,i,s.vendor,s.product,s.version)},t.parsePayload=function(e){var t=new DataView(e),r=0,n=t.getUint32(r,!0);r+=4;var o=t.getUint32(r,!0);return r+=4,{product:o,vendor:n,version:t.getUint32(r,!0)}},t.prototype.getVendor=function(){return this.vendor},t.prototype.getProduct=function(){return this.product},t.prototype.getVersion=function(){return this.version},t.prototype.isValidRequest=function(e){return e===i.GetVersionMessage.TYPE},t.prototype.packPayload=function(e){var t=new DataView(e),r=this.getHeaderSize();t.setUint32(r,this.vendor,!0),r+=4,t.setUint32(r,this.product,!0),r+=4,t.setUint32(r,this.version,!0)},t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.TYPE=33,t.PAYLOAD_SIZE_IN_BYTES=12,t}(r(0).LifXMessage);t.StateVersionMessage=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnitConverter=void 0;var n=function(){function e(){}return e.brightnessFromLifx=function(t){return e.roundToTwoDecimalPlaces(t/655.35)},e.brightnessFromAlexa=function(t){return e.colorBrightnessFromAlexa(t/100)},e.colorBrightnessFromLifx=function(t){return e.roundToFourDecimalPlaces(t/65535)},e.colorBrightnessFromAlexa=function(e){return Math.round(65535*e)},e.hueFromLifx=function(t){return e.roundToTwoDecimalPlaces(360*t/65536)},e.hueFromAlexa=function(e){return Math.round(65536*e/360)%65536},e.saturationFromLifx=function(t){return e.roundToFourDecimalPlaces(t/65535)},e.saturationFromAlexa=function(e){return Math.round(65535*e)},e.powerFromLifx=function(e){return 0===e?"OFF":"ON"},e.powerFromAlexa=function(e){return"ON"===e.toUpperCase()?65535:0},e.colorTemperatureFromLifx=function(e){return e},e.colorTemperatureFromAlexa=function(e){return e},e.increaseColorTemperature=function(e,t){var r=e+t;return r<=1e4?r:1e4},e.decreaseColorTemperature=function(e,t){var r=e-t;return r>=1e3?r:1e3},e.adjustAlexaBrightness=function(e,t){var r=e+t;return r<0&&(r=0),r>100&&(r=100),r},e.roundToTwoDecimalPlaces=function(e){return Math.round(100*e)/100},e.roundToFourDecimalPlaces=function(e){return Math.round(1e4*e)/1e4},e}();t.UnitConverter=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ExecuteBlueprintAction=void 0;var n=r(15),o=function(){function e(e,t){this.blueprintOrCallback=e,this.actionOrchestrator=t}return e.prototype.perform=function(e,t,r){var o=this.blueprintOrCallback instanceof Function?this.blueprintOrCallback(e):this.blueprintOrCallback;if(!o)return t();(this.actionOrchestrator?this.actionOrchestrator:new n.ActionOrchestrator).orchestrate({actions:o.actions.slice(),finalResponseCreator:o.finalResponseCreator},e,(function(r){e.blueprintResponse=r,t()}),(function(t){e.blueprintResponse=t,r({message:t.event.payload.message,type:t.event.payload.type})}))},e}();t.ExecuteBlueprintAction=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ParseResponseAction=void 0;var n=r(45),o=r(28),i=function(){function e(){this.className="ParseResponseAction"}return e.prototype.perform=function(e,t,r){try{this.doParseResponse(e)}catch(t){return console.error(this.className+":: Unable to parse the Base 64 Response "+e.payload.base64Response+", Exception: "+t.message),r({message:this.className+":: Unable to parse device response message",type:"INTERNAL_ERROR"})}return t()},e.prototype.doParseResponse=function(e){void 0===e.payload.base64Response&&(console.debug(this.className+":: Getting base64Response from Identify Endpoints directive payload"),e.payload.base64Response=e.payload.initialDirectivePayload.base64Response),console.debug(this.className+":: Base64 Response: "+e.payload.base64Response.toString());var t=o.Base64Util.dec(e.payload.base64Response);console.debug(this.className+":: Decrypted Response: "+t);var r=n.LifXMessageFactory.createFromOctetStream(t);console.debug(this.className+":: Parsed Response: "+JSON.stringify(r)),e.executionInfo.macAddress=r.getTarget(),e.payload.response=r},e}();t.ParseResponseAction=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.GetServiceMessage=void 0;var i=r(0),a=function(e){function t(r,n){return e.call(this,r,i.LifXMessage.BROADCAST_MAC_ADDRESS,!1,!1,t.TYPE,n)||this}return o(t,e),t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.TYPE=2,t.PAYLOAD_SIZE_IN_BYTES=0,t}(i.LifXMessage);t.GetServiceMessage=a},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.LightSetPowerMessage=void 0;var i=function(e){function t(r,n,o,i,a,s,u){void 0===s&&(s=0),void 0===u&&(u=0);var c=e.call(this,r,n,o,i,t.TYPE,a)||this;return c.level=s,c.duration=u,c}return o(t,e),t.create=function(e,r,n,o,i,a){var s=new t(e,r,n,o,i);return s.parsePayload(a),s},t.prototype.getLevel=function(){return this.level},t.prototype.getDuration=function(){return this.duration},t.prototype.packPayload=function(e){var t=new DataView(e),r=this.getHeaderSize();t.setUint16(r,this.level,!0),r+=2,t.setUint32(r,this.duration,!0)},t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.prototype.parsePayload=function(e){var t=new DataView(e),r=0;this.level=t.getUint16(r,!0),r+=2,this.duration=t.getUint32(r,!0)},t.TYPE=117,t.PAYLOAD_SIZE_IN_BYTES=6,t}(r(0).LifXMessage);t.LightSetPowerMessage=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Base64Util=void 0;var n=function(){function e(){}return e.enc=function(e){return"undefined"!=typeof Base64?Base64.encode(e):new Buffer(e).toString("base64")},e.dec=function(e){return"undefined"!=typeof Base64?Base64.decode(e):new Uint8Array(new Buffer(e,"base64"))},e}();t.Base64Util=n},function(e,t,r){"use strict";var n=r(12),o=r(15),i=r(4),a=r(40),s=r(53),u=function(){function e(e,t){this.blueprintStore=e,this.actionOrchestrator=t,null==e&&(this.blueprintStore=new a.OrchestrationBlueprintStore),null==t&&(this.actionOrchestrator=new o.ActionOrchestrator),this.sequenceGenerator=new s.SequenceGenerator,this.sourceIdentifier=Math.floor(4294967295*Math.random())}return e.prototype.executeDirective=function(t,r,o,a){console.debug(e.className+":: Executing directive: "+JSON.stringify(t));var s=t.directive,u="",c={responses:{},sequenceGenerator:this.sequenceGenerator,sourceIdentifier:this.sourceIdentifier},p={};if(void 0!==s.endpoint&&(u=s.endpoint.endpointId,p=s.endpoint.cookie),!r.isSupportedTransportProtocol(n.TransportProtocol.RAW_UDP))return console.error(e.className+":: requires UDP relay support to work!"),a(i.DirectiveResponseCreator.createErrorResponse("INTERNAL_ERROR",e.className+":: requires UDP relay support to work!",u));var l=s.header.namespace,f=s.header.name,d=this.blueprintStore.getBlueprint(s.header);return null===d?(console.error(e.className+":: No blueprint found for directive { with namespace: $ }{namespace} and name: "+f+"."),a(i.DirectiveResponseCreator.createErrorResponse("INVALID_DIRECTIVE",e.className+":: Directive with namespace: "+l+" and name: "+f+" not supported!",u))):this.actionOrchestrator.orchestrate(d,{cookie:p,endpointId:u,executionInfo:c,payload:{initialDirectivePayload:s.payload},requestRelay:r},o,a)},e.className="LifxSkill",e}();e.exports=u},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=r(2),s=function(e){function t(t,r,n){return e.call(this,t,a.TransportProtocol.HTTP,r,n)||this}return o(t,e),t}(i.RequestContext);t.HttpRequestContext=s},function(e,t,r){var n,o,i=r(13),a=r(14),s=0,u=0;e.exports=function(e,t,r){var c=t&&r||0,p=t||[],l=(e=e||{}).node||n,f=void 0!==e.clockseq?e.clockseq:o;if(null==l||null==f){var d=i();null==l&&(l=n=[1|d[0],d[1],d[2],d[3],d[4],d[5]]),null==f&&(f=o=16383&(d[6]<<8|d[7]))}var g=void 0!==e.msecs?e.msecs:(new Date).getTime(),h=void 0!==e.nsecs?e.nsecs:u+1,m=g-s+(h-u)/1e4;if(m<0&&void 0===e.clockseq&&(f=f+1&16383),(m<0||g>s)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");s=g,u=h,o=f;var _=(1e4*(268435455&(g+=122192928e5))+h)%4294967296;p[c++]=_>>>24&255,p[c++]=_>>>16&255,p[c++]=_>>>8&255,p[c++]=255&_;var v=g/4294967296*1e4&268435455;p[c++]=v>>>8&255,p[c++]=255&v,p[c++]=v>>>24&15|16,p[c++]=v>>>16&255,p[c++]=f>>>8|128,p[c++]=255&f;for(var y=0;y<6;++y)p[c+y]=l[y];return t||a(p)}},function(e,t,r){var n=r(13),o=r(14);e.exports=function(e,t,r){var i=t&&r||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var a=(e=e||{}).random||(e.rng||n)();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t)for(var s=0;s<16;++s)t[i+s]=a[s];return t||o(a)}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=r(2),s=function(e){function t(t,r,n){return e.call(this,t,a.TransportProtocol.RAW_TCP,r,n)||this}return o(t,e),t}(i.RequestContext);t.TCPRequestContext=s},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),a=r(2),s=function(e){function t(t,r,n){return e.call(this,t,a.TransportProtocol.RAW_UDP,r,n)||this}return o(t,e),t}(i.RequestContext);t.UDPRequestContext=s},function(e,t,r){var n,o,i,a,s;n=r(36),o=r(16).utf8,i=r(37),a=r(16).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?a.stringToBytes(e):o.stringToBytes(e):i(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var r=n.bytesToWords(e),u=8*e.length,c=1732584193,p=-271733879,l=-1732584194,f=271733878,d=0;d<r.length;d++)r[d]=16711935&(r[d]<<8|r[d]>>>24)|4278255360&(r[d]<<24|r[d]>>>8);r[u>>>5]|=128<<u%32,r[14+(u+64>>>9<<4)]=u;var g=s._ff,h=s._gg,m=s._hh,_=s._ii;for(d=0;d<r.length;d+=16){var v=c,y=p,S=l,P=f;c=g(c,p,l,f,r[d+0],7,-680876936),f=g(f,c,p,l,r[d+1],12,-389564586),l=g(l,f,c,p,r[d+2],17,606105819),p=g(p,l,f,c,r[d+3],22,-1044525330),c=g(c,p,l,f,r[d+4],7,-176418897),f=g(f,c,p,l,r[d+5],12,1200080426),l=g(l,f,c,p,r[d+6],17,-1473231341),p=g(p,l,f,c,r[d+7],22,-45705983),c=g(c,p,l,f,r[d+8],7,1770035416),f=g(f,c,p,l,r[d+9],12,-1958414417),l=g(l,f,c,p,r[d+10],17,-42063),p=g(p,l,f,c,r[d+11],22,-1990404162),c=g(c,p,l,f,r[d+12],7,1804603682),f=g(f,c,p,l,r[d+13],12,-40341101),l=g(l,f,c,p,r[d+14],17,-1502002290),c=h(c,p=g(p,l,f,c,r[d+15],22,1236535329),l,f,r[d+1],5,-165796510),f=h(f,c,p,l,r[d+6],9,-1069501632),l=h(l,f,c,p,r[d+11],14,643717713),p=h(p,l,f,c,r[d+0],20,-373897302),c=h(c,p,l,f,r[d+5],5,-701558691),f=h(f,c,p,l,r[d+10],9,38016083),l=h(l,f,c,p,r[d+15],14,-660478335),p=h(p,l,f,c,r[d+4],20,-405537848),c=h(c,p,l,f,r[d+9],5,568446438),f=h(f,c,p,l,r[d+14],9,-1019803690),l=h(l,f,c,p,r[d+3],14,-187363961),p=h(p,l,f,c,r[d+8],20,1163531501),c=h(c,p,l,f,r[d+13],5,-1444681467),f=h(f,c,p,l,r[d+2],9,-51403784),l=h(l,f,c,p,r[d+7],14,1735328473),c=m(c,p=h(p,l,f,c,r[d+12],20,-1926607734),l,f,r[d+5],4,-378558),f=m(f,c,p,l,r[d+8],11,-2022574463),l=m(l,f,c,p,r[d+11],16,1839030562),p=m(p,l,f,c,r[d+14],23,-35309556),c=m(c,p,l,f,r[d+1],4,-1530992060),f=m(f,c,p,l,r[d+4],11,1272893353),l=m(l,f,c,p,r[d+7],16,-155497632),p=m(p,l,f,c,r[d+10],23,-1094730640),c=m(c,p,l,f,r[d+13],4,681279174),f=m(f,c,p,l,r[d+0],11,-358537222),l=m(l,f,c,p,r[d+3],16,-722521979),p=m(p,l,f,c,r[d+6],23,76029189),c=m(c,p,l,f,r[d+9],4,-640364487),f=m(f,c,p,l,r[d+12],11,-421815835),l=m(l,f,c,p,r[d+15],16,530742520),c=_(c,p=m(p,l,f,c,r[d+2],23,-995338651),l,f,r[d+0],6,-198630844),f=_(f,c,p,l,r[d+7],10,1126891415),l=_(l,f,c,p,r[d+14],15,-1416354905),p=_(p,l,f,c,r[d+5],21,-57434055),c=_(c,p,l,f,r[d+12],6,1700485571),f=_(f,c,p,l,r[d+3],10,-1894986606),l=_(l,f,c,p,r[d+10],15,-1051523),p=_(p,l,f,c,r[d+1],21,-2054922799),c=_(c,p,l,f,r[d+8],6,1873313359),f=_(f,c,p,l,r[d+15],10,-30611744),l=_(l,f,c,p,r[d+6],15,-1560198380),p=_(p,l,f,c,r[d+13],21,1309151649),c=_(c,p,l,f,r[d+4],6,-145523070),f=_(f,c,p,l,r[d+11],10,-1120210379),l=_(l,f,c,p,r[d+2],15,718787259),p=_(p,l,f,c,r[d+9],21,-343485551),c=c+v>>>0,p=p+y>>>0,l=l+S>>>0,f=f+P>>>0}return n.endian([c,p,l,f])})._ff=function(e,t,r,n,o,i,a){var s=e+(t&r|~t&n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._gg=function(e,t,r,n,o,i,a){var s=e+(t&n|r&~n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._hh=function(e,t,r,n,o,i,a){var s=e+(t^r^n)+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._ii=function(e,t,r,n,o,i,a){var s=e+(r^(t|~n))+(o>>>0)+a;return(s<<i|s>>>32-i)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var r=n.wordsToBytes(s(e,t));return t&&t.asBytes?r:t&&t.asString?a.bytesToString(r):n.bytesToHex(r)}},function(e,t){var r,n;r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t},wordsToBytes:function(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t},bytesToHex:function(e){for(var t=[],r=0;r<e.length;r++)t.push((e[r]>>>4).toString(16)),t.push((15&e[r]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t},bytesToBase64:function(e){for(var t=[],n=0;n<e.length;n+=3)for(var o=e[n]<<16|e[n+1]<<8|e[n+2],i=0;i<4;i++)8*n+6*i<=8*e.length?t.push(r.charAt(o>>>6*(3-i)&63)):t.push("=");return t.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],n=0,o=0;n<e.length;o=++n%4)0!=o&&t.push((r.indexOf(e.charAt(n-1))&Math.pow(2,-2*o+8)-1)<<2*o|r.indexOf(e.charAt(n))>>>6-2*o);return t}},e.exports=n},function(e,t){function r(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(r(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&r(e.slice(0,0))}(e)||!!e._isBuffer)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductInfoHelper=void 0;var n=r(39),o=function(){function e(){}return e.getProductInformation=function(t,r){for(var o,i=0,a=n.ProductMap;i<a.length;i++){var s=a[i];if(s.vid===t){o=s;break}}if(void 0===o)return null;for(var u=0,c=o.products;u<c.length;u++){var p=c[u];if(p.pid===r){var l=e.generateCapabilities(p),f=JSON.parse(JSON.stringify(p));return f.features.isOkToReportCT=!0,{capabilities:l,product:f,vendorName:o.name}}}return null},e.supportsBrightness=function(e){return 0!==Object.keys(e).length&&!0!==e.relays&&!0!==e.buttons},e.supportsColorTemperature=function(e){return e.temperature_range&&e.temperature_range[0]!==e.temperature_range[1]},e.generateCapabilities=function(t){var r=[e.powerControllerCapability];return e.supportsBrightness(t.features)&&r.push(e.brightnessCapability),!0===t.features.color&&r.push(e.colorCapability),e.supportsColorTemperature(t.features)&&r.push(e.colorTemperatureCapability),r},e.powerControllerCapability={interface:"Alexa.PowerController",properties:{proactivelyReported:!1,retrievable:!0,supported:[{name:"powerState"}]},type:"AlexaInterface",version:"3"},e.colorCapability={interface:"Alexa.ColorController",properties:{proactivelyReported:!1,retrievable:!0,supported:[{name:"color"}]},type:"AlexaInterface",version:"3"},e.brightnessCapability={interface:"Alexa.BrightnessController",properties:{proactivelyReported:!1,retrievable:!0,supported:[{name:"brightness"}]},type:"AlexaInterface",version:"3"},e.colorTemperatureCapability={interface:"Alexa.ColorTemperatureController",properties:{proactivelyReported:!1,retrievable:!0,supported:[{name:"colorTemperatureInKelvin"}]},type:"AlexaInterface",version:"3"},e}();t.ProductInfoHelper=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProductMap=void 0,t.ProductMap=[{vid:1,name:"LIFX",defaults:{hev:!1,color:!1,chain:!1,matrix:!1,relays:!1,buttons:!1,infrared:!1,multizone:!1,temperature_range:null,extended_multizone:!1},products:[{pid:1,name:"LIFX Original 1000",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[]},{pid:3,name:"LIFX Color 650",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[]},{pid:10,name:"LIFX White 800 (Low Voltage)",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2700,6500]},upgrades:[]},{pid:11,name:"LIFX White 800 (High Voltage)",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2700,6500]},upgrades:[]},{pid:15,name:"LIFX Color 1000",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[]},{pid:18,name:"LIFX White 900 BR30 (Low Voltage)",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[]},{pid:19,name:"LIFX White 900 BR30 (High Voltage)",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[]},{pid:20,name:"LIFX Color 1000 BR30",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[]},{pid:22,name:"LIFX Color 1000",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[]},{pid:27,name:"LIFX A19",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:28,name:"LIFX BR30",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:29,name:"LIFX A19 Night Vision",features:{color:!0,chain:!1,matrix:!1,infrared:!0,multizone:!1,temperature_range:[2500,9e3]},upgrades:[{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:30,name:"LIFX BR30 Night Vision",features:{color:!0,chain:!1,matrix:!1,infrared:!0,multizone:!1,temperature_range:[2500,9e3]},upgrades:[{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:31,name:"LIFX Z",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!0,temperature_range:[2500,9e3]},upgrades:[]},{pid:32,name:"LIFX Z",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!0,temperature_range:[2500,9e3],min_ext_mz_firmware:1532997580,min_ext_mz_firmware_components:[2,77]},upgrades:[{major:2,minor:77,features:{extended_multizone:!0}},{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:36,name:"LIFX Downlight",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:37,name:"LIFX Downlight",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:38,name:"LIFX Beam",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!0,temperature_range:[2500,9e3],min_ext_mz_firmware:1532997580,min_ext_mz_firmware_components:[2,77]},upgrades:[{major:2,minor:77,features:{extended_multizone:!0}},{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:39,name:"LIFX Downlight White to Warm",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:40,name:"LIFX Downlight",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:43,name:"LIFX A19",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:44,name:"LIFX BR30",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:45,name:"LIFX A19 Night Vision",features:{color:!0,chain:!1,matrix:!1,infrared:!0,multizone:!1,temperature_range:[2500,9e3]},upgrades:[{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:46,name:"LIFX BR30 Night Vision",features:{color:!0,chain:!1,matrix:!1,infrared:!0,multizone:!1,temperature_range:[2500,9e3]},upgrades:[{major:2,minor:80,features:{temperature_range:[1500,9e3]}}]},{pid:49,name:"LIFX Mini Color",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:50,name:"LIFX Mini White to Warm",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,6500]},upgrades:[{major:3,minor:70,features:{temperature_range:[1500,9e3]}}]},{pid:51,name:"LIFX Mini White",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2700,2700]},upgrades:[]},{pid:52,name:"LIFX GU10",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:53,name:"LIFX GU10",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:55,name:"LIFX Tile",features:{color:!0,chain:!0,matrix:!0,infrared:!1,multizone:!1,temperature_range:[2500,9e3]},upgrades:[]},{pid:57,name:"LIFX Candle",features:{color:!0,chain:!1,matrix:!0,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:59,name:"LIFX Mini Color",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:60,name:"LIFX Mini White to Warm",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,6500]},upgrades:[{major:3,minor:70,features:{temperature_range:[1500,9e3]}}]},{pid:61,name:"LIFX Mini White",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2700,2700]},upgrades:[]},{pid:62,name:"LIFX A19",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:63,name:"LIFX BR30",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:64,name:"LIFX A19 Night Vision",features:{color:!0,chain:!1,matrix:!1,infrared:!0,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:65,name:"LIFX BR30 Night Vision",features:{color:!0,chain:!1,matrix:!1,infrared:!0,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:66,name:"LIFX Mini White",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2700,2700]},upgrades:[]},{pid:68,name:"LIFX Candle",features:{color:!0,chain:!1,matrix:!0,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:70,name:"LIFX Switch",features:{color:!1,relays:!0,chain:!1,matrix:!1,buttons:!0,infrared:!1,multizone:!1,temperature_range:null},upgrades:[]},{pid:71,name:"LIFX Switch",features:{color:!1,relays:!0,chain:!1,matrix:!1,buttons:!0,infrared:!1,multizone:!1,temperature_range:null},upgrades:[]},{pid:81,name:"LIFX Candle White to Warm",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2200,6500]},upgrades:[]},{pid:82,name:"LIFX Filament Clear",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2100,2100]},upgrades:[]},{pid:85,name:"LIFX Filament Amber",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2e3,2e3]},upgrades:[]},{pid:87,name:"LIFX Mini White",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2700,2700]},upgrades:[]},{pid:88,name:"LIFX Mini White",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2700,2700]},upgrades:[]},{pid:89,name:"LIFX Switch",features:{color:!1,relays:!0,chain:!1,matrix:!1,buttons:!0,infrared:!1,multizone:!1,temperature_range:null},upgrades:[]},{pid:90,name:"LIFX Clean",features:{hev:!0,color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:91,name:"LIFX Color",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:92,name:"LIFX Color",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:93,name:"LIFX A19 US",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:94,name:"LIFX BR30",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:96,name:"LIFX Candle White to Warm",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2200,6500]},upgrades:[]},{pid:97,name:"LIFX A19",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:98,name:"LIFX BR30",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:99,name:"LIFX Clean",features:{hev:!0,color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:100,name:"LIFX Filament Clear",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2100,2100]},upgrades:[]},{pid:101,name:"LIFX Filament Amber",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2e3,2e3]},upgrades:[]},{pid:109,name:"LIFX A19 Night Vision",features:{color:!0,chain:!1,matrix:!1,infrared:!0,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:110,name:"LIFX BR30 Night Vision",features:{color:!0,chain:!1,matrix:!1,infrared:!0,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:111,name:"LIFX A19 Night Vision",features:{color:!0,chain:!1,matrix:!1,infrared:!0,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:112,name:"LIFX BR30 Night Vision Intl",features:{color:!0,chain:!1,matrix:!1,infrared:!0,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:113,name:"LIFX Mini WW US",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:114,name:"LIFX Mini WW Intl",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:115,name:"LIFX Switch",features:{color:!1,relays:!0,chain:!1,matrix:!1,buttons:!0,infrared:!1,multizone:!1,temperature_range:null},upgrades:[]},{pid:116,name:"LIFX Switch",features:{color:!1,relays:!0,chain:!1,matrix:!1,buttons:!0,infrared:!1,multizone:!1,temperature_range:null},upgrades:[]},{pid:117,name:"LIFX Z US",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!0,temperature_range:[1500,9e3],extended_multizone:!0},upgrades:[]},{pid:118,name:"LIFX Z Intl",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!0,temperature_range:[1500,9e3],extended_multizone:!0},upgrades:[]},{pid:119,name:"LIFX Beam US",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!0,temperature_range:[1500,9e3],extended_multizone:!0},upgrades:[]},{pid:120,name:"LIFX Beam Intl",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!0,temperature_range:[1500,9e3],extended_multizone:!0},upgrades:[]},{pid:121,name:"LIFX Downlight Intl",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:122,name:"LIFX Downlight US",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:123,name:"LIFX Color US",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:124,name:"LIFX Color Intl",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:125,name:"LIFX White to Warm US",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:126,name:"LIFX White to Warm Intl",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:127,name:"LIFX White US",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2700,2700]},upgrades:[]},{pid:128,name:"LIFX White Intl",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2700,2700]},upgrades:[]},{pid:129,name:"LIFX Color US",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:130,name:"LIFX Color Intl",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:131,name:"LIFX White To Warm US",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:132,name:"LIFX White To Warm Intl",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:133,name:"LIFX White US",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2700,2700]},upgrades:[]},{pid:134,name:"LIFX White Intl",features:{color:!1,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[2700,2700]},upgrades:[]},{pid:135,name:"LIFX GU10 Color US",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:136,name:"LIFX GU10 Color Intl",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:137,name:"LIFX Candle Color US",features:{color:!0,chain:!1,matrix:!0,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:138,name:"LIFX Candle Color Intl",features:{color:!0,chain:!1,matrix:!0,infrared:!1,multizone:!1,temperature_range:[1500,9e3]},upgrades:[]},{pid:141,name:"LIFX Neon US",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!0,temperature_range:[1500,9e3],extended_multizone:!0,upgrades:[]}},{pid:142,name:"LIFX Neon Intl",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!0,temperature_range:[1500,9e3],extended_multizone:!0,upgrades:[]}},{pid:143,name:"LIFX String US",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!0,temperature_range:[1500,9e3],extended_multizone:!0,upgrades:[]}},{pid:144,name:"LIFX String Intl",features:{color:!0,chain:!1,matrix:!1,infrared:!1,multizone:!0,temperature_range:[1500,9e3],extended_multizone:!0,upgrades:[]}}]}]},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OrchestrationBlueprintStore=void 0;var n=r(24),o=r(41),i=r(42),a=r(43),s=r(44),u=r(25),c=r(47),p=r(4),l=r(11),f=r(8),d=r(9),g=r(10),h=r(6),m=r(27),_=r(7),v=r(5),y=r(23),S=function(){function e(){}return e.getContext=function(e){return new i.GetContextAction(e)},e.executeBlueprint=function(e){return new n.ExecuteBlueprintAction(e)},e.sendRequest=function(e){return new c.SendRelayRequestAction(e)},e.createFinalResponse=function(e){return new o.FinalResponseCreator(e)},e.createLightSetPowerMessage=function(t,r,n){var o=1e3;return void 0!==n&&(o=e.getDurationForBrightnessPowerTransition(t,n)),new m.LightSetPowerMessage(t.executionInfo.sourceIdentifier,t.cookie.macAddress,!1,!0,t.executionInfo.sequenceGenerator.getNextSequenceNumber(),y.UnitConverter.powerFromAlexa(r),o)},e.getDurationForBrightnessPowerTransition=function(t,r){var n=1e3,o=e.getLightState(t);return y.UnitConverter.brightnessFromLifx(o.getBrightness())>r&&(r<50&&(n=5e3),r<20&&(n=8e3),r<10&&(n=12e3)),n},e.createLightSetColorMessage=function(e){var t=e.payload.initialDirectivePayload.color;return new _.LightSetWaveformOptionalMessage(e.executionInfo.sourceIdentifier,e.cookie.macAddress,!0,!1,e.executionInfo.sequenceGenerator.getNextSequenceNumber(),!1,0,!0,y.UnitConverter.hueFromAlexa(t.hue),!0,y.UnitConverter.saturationFromAlexa(t.saturation))},e.createLightSetColorTemperatureMessage=function(t,r){void 0===r&&(r="SET");var n=e.getDirectiveOrAdjustedColorTemperature(t);return new _.LightSetWaveformOptionalMessage(t.executionInfo.sourceIdentifier,t.cookie.macAddress,!0,!1,t.executionInfo.sequenceGenerator.getNextSequenceNumber(),!1,0,!1,0,"SET"===r,0,!0,y.UnitConverter.colorTemperatureFromAlexa(n))},e.createLightSetBrightnessMessage=function(e,t){if(void 0!==e.payload.initialDirectivePayload.color)return this.createLightSetBrightnessAndColorMessage(e,t);var r=void 0!==e.payload.adjustedColorTemperature;return r||void 0!==e.payload.initialDirectivePayload.colorTemperatureInKelvin?this.createLightSetBrightnessAndColorTemperatureMessage(e,t,r):new _.LightSetWaveformOptionalMessage(e.executionInfo.sourceIdentifier,e.cookie.macAddress,!0,!1,e.executionInfo.sequenceGenerator.getNextSequenceNumber(),!0,y.UnitConverter.brightnessFromAlexa(t))},e.createLightSetBrightnessAndColorMessage=function(e,t){var r=e.payload.initialDirectivePayload.color;return new _.LightSetWaveformOptionalMessage(e.executionInfo.sourceIdentifier,e.cookie.macAddress,!0,!1,e.executionInfo.sequenceGenerator.getNextSequenceNumber(),!0,y.UnitConverter.brightnessFromAlexa(t),!0,y.UnitConverter.hueFromAlexa(r.hue),!0,y.UnitConverter.saturationFromAlexa(r.saturation))},e.createLightSetBrightnessAndColorTemperatureMessage=function(t,r,n){var o=e.getDirectiveOrAdjustedColorTemperature(t);return new _.LightSetWaveformOptionalMessage(t.executionInfo.sourceIdentifier,t.cookie.macAddress,!0,!1,t.executionInfo.sequenceGenerator.getNextSequenceNumber(),!0,y.UnitConverter.brightnessFromAlexa(r),!1,0,!n,y.UnitConverter.saturationFromAlexa(0),!0,y.UnitConverter.colorTemperatureFromAlexa(o))},e.createGetLabelMessage=function(e){return new d.GetLabelMessage(e.executionInfo.sourceIdentifier,e.executionInfo.macAddress,!0,!1,e.executionInfo.sequenceGenerator.getNextSequenceNumber())},e.createGetVersionMessage=function(e){return new g.GetVersionMessage(e.executionInfo.sourceIdentifier,e.executionInfo.macAddress,!0,!1,e.executionInfo.sequenceGenerator.getNextSequenceNumber())},e.createGetHostFirmwareMessage=function(e){return new f.GetHostFirmwareMessage(e.executionInfo.sourceIdentifier,e.executionInfo.macAddress,!0,!1,e.executionInfo.sequenceGenerator.getNextSequenceNumber())},e.createLightGetColorMessage=function(e){return new h.LightGetColorMessage(e.executionInfo.sourceIdentifier,e.cookie.macAddress,!0,!1,e.executionInfo.sequenceGenerator.getNextSequenceNumber())},e.getLightState=function(e){return e.executionInfo.responses[v.LightStateMessage.TYPE]},e.adjustColorTemperature=function(t,r){var n,o,i=y.UnitConverter.colorTemperatureFromLifx(e.getLightState(t).getKelvin()),a="INCREASE"===r?y.UnitConverter.increaseColorTemperature(i,1e3):y.UnitConverter.decreaseColorTemperature(i,1e3),s=null!==(o=JSON.parse(null!==(n=t.cookie.productFeatures)&&void 0!==n?n:"{}").temperature_range)&&void 0!==o?o:[0,0],u=s[0]===s[1];return a<s[0]&&(a=s[0]),a>s[1]&&(a=s[1]),u?void 0:a},e.getDirectiveOrAdjustedColorTemperature=function(e){var t;return Number(null!==(t=e.payload.initialDirectivePayload.colorTemperatureInKelvin)&&void 0!==t?t:e.payload.adjustedColorTemperature)},e.getDirectiveBrightness=function(e){return Number(e.payload.initialDirectivePayload.brightness)},e.getAdjustedBrightness=function(t){var r=e.getLightState(t),n=y.UnitConverter.brightnessFromLifx(r.getBrightness()),o=Number(t.payload.initialDirectivePayload.brightnessDelta);return y.UnitConverter.adjustAlexaBrightness(n,o)},e.isLightPoweredOn=function(t){var r=e.getLightState(t);return"ON"===y.UnitConverter.powerFromLifx(r.getPower())},e.prototype.getBlueprint=function(t){var r=t.namespace,n=t.name;if(!(r in e.DIRECTIVE_TO_BLUEPRINT_MAPPING)||!(n in e.DIRECTIVE_TO_BLUEPRINT_MAPPING[r]))return null;var o=e.DIRECTIVE_TO_BLUEPRINT_MAPPING[r][n];return{actions:o.actions.slice(),finalResponseCreator:o.finalResponseCreator}},e.className="OrchestrationBlueprintStore",e.parseResponse=new s.ParseRelayResponseAction,e.checkAcknowledgement=new a.InspectResponseAction("type",l.AcknowledgementMessage.TYPE),e.checkLightState=new a.InspectResponseAction("type",v.LightStateMessage.TYPE),e.PARSE_LIGHT_STATE_SUB_BLUEPRINT={actions:[e.parseResponse,e.checkLightState]},e.parseLightState=e.executeBlueprint(e.PARSE_LIGHT_STATE_SUB_BLUEPRINT),e.QUERY_LIGHT_STATE_SUB_BLUEPRINT={actions:[e.sendRequest((function(t){return e.createLightGetColorMessage(t)})),e.parseLightState]},e.queryLightState=e.executeBlueprint(e.QUERY_LIGHT_STATE_SUB_BLUEPRINT),e.SET_POWER_ON_SUB_BLUEPRINT={actions:[e.sendRequest((function(t){return e.createLightSetPowerMessage(t,"ON")})),e.parseResponse,e.checkAcknowledgement]},e.powerOnIfNotAlreadyOn=e.executeBlueprint((function(t){if(!e.isLightPoweredOn(t))return e.SET_POWER_ON_SUB_BLUEPRINT})),e.NONZERO_BRIGHTNESS_LEVEL=7,e.SET_NONZERO_BRIGHTNESS_SUB_BLUEPRINT={actions:[e.sendRequest((function(t){return e.createLightSetBrightnessMessage(t,e.NONZERO_BRIGHTNESS_LEVEL)})),e.parseLightState,e.getContext((function(t){e.getLightState(t).setBrightness(y.UnitConverter.brightnessFromAlexa(e.NONZERO_BRIGHTNESS_LEVEL))}))]},e.setNonZeroBrightnessIfZero=e.executeBlueprint((function(t){var r=e.getLightState(t);if(0===y.UnitConverter.brightnessFromLifx(r.getBrightness()))return e.SET_NONZERO_BRIGHTNESS_SUB_BLUEPRINT})),e.CHECK_AND_FIX_POWER_AND_BRIGHTNESS_SUB_BLUEPRINT={actions:[e.powerOnIfNotAlreadyOn,e.setNonZeroBrightnessIfZero]},e.checkAndFixPowerAndBrightness=e.executeBlueprint(e.CHECK_AND_FIX_POWER_AND_BRIGHTNESS_SUB_BLUEPRINT),e.REPORT_STATE_BLUEPRINT={actions:[e.queryLightState],finalResponseCreator:e.createFinalResponse(p.DirectiveResponseCreator.createDeviceStateResponse)},e.SET_POWER_OFF_BLUEPRINT={actions:[e.sendRequest((function(t){return e.createLightSetPowerMessage(t,"OFF")})),e.parseResponse,e.checkAcknowledgement],finalResponseCreator:e.createFinalResponse(p.DirectiveResponseCreator.createPowerOffResponse)},e.SET_POWER_ON_BLUEPRINT={actions:[e.executeBlueprint(e.SET_POWER_ON_SUB_BLUEPRINT),e.queryLightState,e.setNonZeroBrightnessIfZero],finalResponseCreator:e.createFinalResponse((function(t){return e.getLightState(t).setPower(y.UnitConverter.powerFromAlexa("ON")),p.DirectiveResponseCreator.createDeviceStateResponse(t)}))},e.SET_BRIGHTNESS_POWER_ON_SUB_BLUEPRINT={actions:[e.sendRequest((function(t){return e.createLightSetPowerMessage(t,"ON",e.getDirectiveBrightness(t))})),e.parseResponse,e.checkAcknowledgement]},e.SET_BRIGHTNESS_NON_0_BLUEPRINT={actions:[e.sendRequest((function(t){return e.createLightSetBrightnessMessage(t,e.getDirectiveBrightness(t))})),e.parseLightState,e.executeBlueprint((function(t){if(!e.isLightPoweredOn(t))return e.SET_BRIGHTNESS_POWER_ON_SUB_BLUEPRINT}))],finalResponseCreator:e.createFinalResponse((function(t){var r=e.getLightState(t);return r.setBrightness(y.UnitConverter.brightnessFromAlexa(e.getDirectiveBrightness(t))),r.setPower(y.UnitConverter.powerFromAlexa("ON")),p.DirectiveResponseCreator.createDeviceStateResponse(t)}))},e.SET_BRIGHTNESS_BLUEPRINT={actions:[e.executeBlueprint((function(t){return 0===e.getDirectiveBrightness(t)?e.SET_POWER_OFF_BLUEPRINT:e.SET_BRIGHTNESS_NON_0_BLUEPRINT}))],finalResponseCreator:e.createFinalResponse((function(e){return e.blueprintResponse}))},e.ADJUST_BRIGHTNESS_SUB_BLUEPRINT={actions:[e.sendRequest((function(t){return e.createLightSetBrightnessMessage(t,t.payload.adjustedBrightness)})),e.parseLightState,e.executeBlueprint((function(t){var r=e.getLightState(t),n=y.UnitConverter.brightnessFromLifx(r.getBrightness()),o=t.payload.adjustedBrightness;if(r.setBrightness(y.UnitConverter.brightnessFromAlexa(o)),!(0===o||n>o||e.isLightPoweredOn(t)))return r.setPower(y.UnitConverter.powerFromAlexa("ON")),e.SET_POWER_ON_SUB_BLUEPRINT}))]},e.ADJUST_BRIGHTNESS_BLUEPRINT={actions:[e.queryLightState,e.executeBlueprint((function(t){return t.payload.adjustedBrightness=e.getAdjustedBrightness(t),0===t.payload.adjustedBrightness&&e.isLightPoweredOn(t)?(e.getLightState(t).setPower(y.UnitConverter.powerFromAlexa("OFF")),e.SET_POWER_OFF_BLUEPRINT):e.ADJUST_BRIGHTNESS_SUB_BLUEPRINT}))],finalResponseCreator:e.createFinalResponse(p.DirectiveResponseCreator.createDeviceStateResponse)},e.SET_COLOR_BLUEPRINT={actions:[e.sendRequest((function(t){return e.createLightSetColorMessage(t)})),e.parseLightState,e.checkAndFixPowerAndBrightness],finalResponseCreator:e.createFinalResponse((function(t){var r=e.getLightState(t),n=t.payload.initialDirectivePayload.color;return r.setHue(y.UnitConverter.hueFromAlexa(n.hue)),r.setSaturation(y.UnitConverter.saturationFromAlexa(n.saturation)),r.setPower(y.UnitConverter.powerFromAlexa("ON")),p.DirectiveResponseCreator.createDeviceStateResponse(t)}))},e.SET_COLOR_TEMPERATURE_BLUEPRINT={actions:[e.sendRequest((function(t){return e.createLightSetColorTemperatureMessage(t)})),e.parseLightState,e.checkAndFixPowerAndBrightness],finalResponseCreator:e.createFinalResponse((function(t){var r=e.getLightState(t),n=Number(t.payload.initialDirectivePayload.colorTemperatureInKelvin);return r.setKelvin(n),r.setSaturation(0),r.setPower(y.UnitConverter.powerFromAlexa("ON")),p.DirectiveResponseCreator.createDeviceStateResponse(t)}))},e.ADJUST_CT_NON_MONOCHROME_SUB_BLUEPRINT={actions:[e.sendRequest((function(t){return e.createLightSetColorTemperatureMessage(t,"ADJUST")})),e.parseLightState]},e.ADJUST_COLOR_TEMPERATURE_SUB_BLUEPRINT={actions:[e.executeBlueprint((function(t){if(void 0!==t.payload.adjustedColorTemperature)return e.ADJUST_CT_NON_MONOCHROME_SUB_BLUEPRINT})),e.checkAndFixPowerAndBrightness],finalResponseCreator:e.createFinalResponse((function(t){var r=e.getLightState(t);return void 0!==t.payload.adjustedColorTemperature&&r.setKelvin(t.payload.adjustedColorTemperature),r.setPower(y.UnitConverter.powerFromAlexa("ON")),p.DirectiveResponseCreator.createDeviceStateResponse(t)}))},e.INCREASE_COLOR_TEMPERATURE_BLUEPRINT={actions:[e.queryLightState,e.getContext((function(t){t.payload.adjustedColorTemperature=e.adjustColorTemperature(t,"INCREASE")})),e.executeBlueprint(e.ADJUST_COLOR_TEMPERATURE_SUB_BLUEPRINT)],finalResponseCreator:e.createFinalResponse((function(e){return e.blueprintResponse}))},e.DECREASE_COLOR_TEMPERATURE_BLUEPRINT={actions:[e.queryLightState,e.getContext((function(t){t.payload.adjustedColorTemperature=e.adjustColorTemperature(t,"DECREASE")})),e.executeBlueprint(e.ADJUST_COLOR_TEMPERATURE_SUB_BLUEPRINT)],finalResponseCreator:e.createFinalResponse((function(e){return e.blueprintResponse}))},e.IDENTIFY_ENDPOINTS_BLUEPRINT={actions:[new u.ParseResponseAction,e.sendRequest((function(t){return e.createGetLabelMessage(t)})),e.parseResponse,e.sendRequest((function(t){return e.createGetVersionMessage(t)})),e.parseResponse,e.sendRequest((function(t){return e.createGetHostFirmwareMessage(t)})),e.parseResponse],finalResponseCreator:e.createFinalResponse(p.DirectiveResponseCreator.createDiscoveryResponse)},e.DIRECTIVE_TO_BLUEPRINT_MAPPING={Alexa:{ReportState:e.REPORT_STATE_BLUEPRINT},"Alexa.BrightnessController":{AdjustBrightness:e.ADJUST_BRIGHTNESS_BLUEPRINT,SetBrightness:e.SET_BRIGHTNESS_BLUEPRINT},"Alexa.ColorController":{SetColor:e.SET_COLOR_BLUEPRINT},"Alexa.ColorTemperatureController":{SetColorTemperature:e.SET_COLOR_TEMPERATURE_BLUEPRINT,IncreaseColorTemperature:e.INCREASE_COLOR_TEMPERATURE_BLUEPRINT,DecreaseColorTemperature:e.DECREASE_COLOR_TEMPERATURE_BLUEPRINT},"Alexa.Discovery":{IdentifyEndpoints:e.IDENTIFY_ENDPOINTS_BLUEPRINT},"Alexa.PowerController":{TurnOff:e.SET_POWER_OFF_BLUEPRINT,TurnOn:e.SET_POWER_ON_BLUEPRINT}},e}();t.OrchestrationBlueprintStore=S},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FinalResponseCreator=void 0;var n=function(){function e(e){this.responseTemplateFunc=e}return e.prototype.createResponse=function(e,t,r){var n=this.responseTemplateFunc(e),o=n.event.header;return"Alexa"===o.namespace&&"ErrorResponse"===o.name?r(n):t(n)},e}();t.FinalResponseCreator=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.GetContextAction=void 0;var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(r(24).ExecuteBlueprintAction);t.GetContextAction=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspectResponseAction=void 0;var n=function(){function e(e,t){this.key=e,this.val=t}return e.prototype.perform=function(t,r,n){var o=t.payload.response;return console.debug(e.className+":: Checking for errors in module: "+this.key+" method: "+this.val+" from the following response: "+JSON.stringify(o)),o[this.key]&&o[this.key]===this.val?r():(console.error(e.className+":: Encountered unexpected response format: "+JSON.stringify(o)+" while looking for key: "+this.key+" with val: "+this.val+"."),n({message:e.className+":: Encountered unexpected device response message format.",type:"INTERNAL_ERROR"}))},e.className="InspectResponseAction",e}();t.InspectResponseAction=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.ParseRelayResponseAction=void 0;var i=r(11),a=r(0),s=function(e){function t(){var t=e.call(this)||this;return t.className="ParseRelayResponseAction",t}return o(t,e),t.prototype.perform=function(t,r,n){try{e.prototype.doParseResponse.call(this,t)}catch(e){return console.error(this.className+":: Unable to parse the Base 64 Response "+t.payload.base64Response+", Exception: "+e.message),n({message:this.className+":: Unable to parse device response message",type:"INTERNAL_ERROR"})}var o=t.executionInfo.relayRequest;console.debug(this.className+":: context.executionInfo.relayRequest: "+JSON.stringify(t.executionInfo.relayRequest));var s=t.payload.response;return o.getTarget()!==a.LifXMessage.BROADCAST_MAC_ADDRESS&&s.getTarget()!==o.getTarget()?(console.error(this.className+":: Target Mismatch: request:  "+o.getTarget()+" response: "+s.getTarget()),n({message:this.className+":: Encountered wrong target response from endpoint.",type:"INTERNAL_ERROR"})):s.getSource()!==o.getSource()?(console.error(this.className+":: Source Mismatch: request:  "+o.getSource()+" response: "+s.getSource()),n({message:this.className+":: Encountered wrong source response from endpoint.",type:"INTERNAL_ERROR"})):s.getSequence()!==o.getSequence()?(console.error(this.className+":: Sequence Mismatch: request:  "+o.getSequence()+" response: "+s.getSequence()),n({message:this.className+":: Encountered wrong sequence response from endpoint.",type:"INTERNAL_ERROR"})):s.getType()!==i.AcknowledgementMessage.TYPE||o.getAckRequired()?t.payload.response.isValidRequest(o.getType())?(t.executionInfo.responses[s.getType()]=s,r()):(console.error(this.className+":: Invalid Request "+o.getType()+" for Response "+s.getType()),n({message:this.className+":: Invalid Request "+o.getType()+" for Response "+s.getType(),type:"INTERNAL_ERROR"})):(console.error(this.className+":: Spurious Acknowledgement message received for "+o.getType()+" which had the AckFlag: "+o.getAckRequired()),n({message:this.className+":: Spurious Acknowledgement message received for "+o.getType()+" which had the AckFlag: "+o.getAckRequired(),type:"INTERNAL_ERROR"}))},t}(r(25).ParseResponseAction);t.ParseRelayResponseAction=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LifXMessageFactory=void 0;var n=r(11),o=r(8),i=r(9),a=r(26),s=r(10),u=r(6),c=r(19),p=r(27),l=r(7),f=r(5),d=r(18),g=r(20),h=r(21),m=r(46),_=r(22),v=function(){function e(){}return e.createFromOctetStream=function(e){var t=0,r=e.buffer,n=new DataView(r);n.getUint16(t,!0);t+=2;n.getUint16(t,!0);t+=2;var o=n.getUint32(t,!0);t+=4;for(var i="",a=0;a<6;a++){i+=("00"+n.getUint8(t+a).toString(16)).slice(-2),a<5&&(i+=":")}t+=14;var s=n.getUint8(t),u=1==(1&s),c=1==(s>>1&1);t+=1;var p=n.getUint8(t);t+=9;var l=n.getUint16(t,!0);return t+=4,this.createLifXMessage(o,i,u,c,l,p,r.slice(t))},e.createLifXMessage=function(t,r,v,y,S,P,I){switch(S){case a.GetServiceMessage.TYPE:return new a.GetServiceMessage(t,P);case m.StateServiceMessage.TYPE:return m.StateServiceMessage.create(t,r,v,y,P,I);case o.GetHostFirmwareMessage.TYPE:return new o.GetHostFirmwareMessage(t,r,v,y,P);case g.StateHostFirmwareMessage.TYPE:return g.StateHostFirmwareMessage.create(t,r,v,y,P,I);case i.GetLabelMessage.TYPE:return new i.GetLabelMessage(t,r,v,y,P);case h.StateLabelMessage.TYPE:return h.StateLabelMessage.create(t,r,v,y,P,I);case s.GetVersionMessage.TYPE:return new s.GetVersionMessage(t,r,v,y,P);case _.StateVersionMessage.TYPE:return _.StateVersionMessage.create(t,r,v,y,P,I);case n.AcknowledgementMessage.TYPE:return new n.AcknowledgementMessage(t,r,v,y,P);case u.LightGetColorMessage.TYPE:return new u.LightGetColorMessage(t,r,v,y,P);case f.LightStateMessage.TYPE:return f.LightStateMessage.create(t,r,v,y,P,I);case c.LightGetPowerMessage.TYPE:return new c.LightGetPowerMessage(t,r,v,y,P);case p.LightSetPowerMessage.TYPE:return p.LightSetPowerMessage.create(t,r,v,y,P,I);case d.LightStatePowerMessage.TYPE:return d.LightStatePowerMessage.create(t,r,v,y,P,I);case l.LightSetWaveformOptionalMessage.TYPE:return l.LightSetWaveformOptionalMessage.create(t,r,v,y,P,I);default:throw new RangeError(e.className+" Cannot handle LifX Message of type :"+S)}},e.className="LifxMessageFactory",e}();t.LifXMessageFactory=v},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0}),t.StateServiceMessage=void 0;var i=r(26),a=function(e){function t(r,n,o,i,a,s,u){var c=e.call(this,r,n,o,i,t.TYPE,a)||this;return c.service=s,c.port=u,c}return o(t,e),t.create=function(e,r,n,o,i,a){var s=t.parsePayload(a);return new t(e,r,n,o,i,s.service,s.port)},t.parsePayload=function(e){var t=new DataView(e),r=0,n=t.getUint8(r);return r+=1,{port:t.getUint32(r,!0),service:n}},t.prototype.getService=function(){return this.service},t.prototype.getPort=function(){return this.port},t.prototype.isValidRequest=function(e){return e===i.GetServiceMessage.TYPE},t.prototype.packPayload=function(e){var t=new DataView(e),r=this.getHeaderSize();t.setUint8(r,this.service),r+=1,t.setUint32(r,this.port,!0)},t.prototype.getPayloadSize=function(){return t.PAYLOAD_SIZE_IN_BYTES},t.TYPE=3,t.PAYLOAD_SIZE_IN_BYTES=5,t}(r(0).LifXMessage);t.StateServiceMessage=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendRelayRequestAction=void 0;var n=r(48),o=r(3),i=r(28),a=function(){function e(e){this.payloadTemplateFunc=e}return e.prototype.perform=function(t,r,o){var a;try{a=this.payloadTemplateFunc(t)}catch(t){return console.error(e.className+":: Error creating a LifX Message"),o({message:e.className+":: Encountered error while creating a LifX Message",type:"INTERNAL_ERROR"})}t.executionInfo.relayRequest=a,console.debug(e.className+":: Sending Request "+JSON.stringify(a));var s=a.toBinary(),u=this.createRelayDirective(t.endpointId,{base64Request:i.Base64Util.enc(s)}),c=new n.RelayData.UDPRequestContext({directive:u},(function(n){return console.debug(e.className+":: Received relay response event: "+JSON.stringify(n)),t.payload.base64Response=n.event.payload.base64Response,r()}),(function(t){return console.error(e.className+":: Encountered UDP error response: "+JSON.stringify(t)),o({message:t.event.payload.message,type:t.event.payload.type})}));console.debug(e.className+":: Relaying intermediate request directive: "+JSON.stringify(u)),t.requestRelay.relay(c)},e.prototype.createRelayDirective=function(e,t){return{endpoint:{endpointId:e},header:{messageId:o.v4(),name:"SendRequest",namespace:"Alexa.UdpController",payloadVersion:"3"},payload:t}},e.className="SendRelayRequestAction",e}();t.SendRelayRequestAction=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(49);t.AlexaAPI=n;var o=r(12);t.RelayData=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(50);t.Capabilities=n;var o=r(51);t.Discovery=o;var i=r(52);t.LocalCapabilities=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SequenceGenerator=void 0;var n=function(){function e(){this.nextSequenceNumber=0}return e.prototype.getNextSequenceNumber=function(){var e=this.nextSequenceNumber;return this.nextSequenceNumber+=1,256===this.nextSequenceNumber&&(this.nextSequenceNumber=0),e},e}();t.SequenceGenerator=n}]);